{"version":3,"sources":["components/UI/Header/Header.module.scss","components/UI/Sidebar/Sidebar.module.scss","api/api.jsx","components/UI/Pagination/Pagination.module.scss","components/UI/Cards/Cards.module.scss","components/UI/Loader/Loader.jsx","components/MainPage/Main.module.scss","components/UI/Container/Container.jsx","store/reducers/mainSearchReducer.jsx","components/UI/Pagination/Pagination.jsx","api/useDebounce.jsx","api/useMediaQuery.jsx","store/reducers/catalogReducer.jsx","components/UI/Container/Container.module.scss","components/UI/MainTemplate/MainTemplate.module.scss","components/UI/Main/Main.module.scss","components/MainPage/Main.jsx","store/reducers/moviesReducer.jsx","components/UI/Cards/Cards.jsx","components/UI/MainTemplate/MainTemplate.jsx","components/UI/Sidebar/Sidebar.jsx","components/MoviePage/Movie.jsx","components/TvPage/Tv.jsx","store/reducers/headerSearchReducer.jsx","store/reducers/authReducer.jsx","components/UI/Header/Header.jsx","components/UI/Main/Main.jsx","App.jsx","store/store.jsx","index.js"],"names":["module","exports","base_uri","api_key","language","api","getMovies","a","format","filter","page","fetch","response","json","results","total_pages","getGenres","genres","getMovieWithGenre","id","search","text","type","total_results","getMovie","result","getCredits","getAnotherMovieInfo","query","params","keywords","undefined","getMoviesWithKeywords","getNewToken","request_token","getSessionId","token","Loader","useLoading","loading","indicator","width","containerProps","indicatorEl","style","textAlign","Container","children","className","s","container","GET_SEARCH_RESULTS","SET_INITIAL_SETTINGS","UPDATE_SEARCH_TEXT","ZERO_OUT_SEARCH_RESULTS","initialState","searchText","totalPages","totalResults","currentPage","isFetchingResults","mainSearchReducer","state","action","updateSearchText","getSearchResults","setInitialSettings","zeroOutSearchResults","loadSearchResults","dispatch","alert","Pagination","rangeOfItems","genreFormat","url","useState","itemsRange","setItemsRange","rangesCount","Math","ceil","useEffect","mediaQuery","window","matchMedia","handleTabletChange","matches","addListener","setRangeIndex","defineRange","removeListener","pages","i","push","rangeIndex","startRangeIndex","endRangeIndex","pagination","pagination__prev","pagination__disabled","onClick","pagination__list","map","pagination__item","pagination__item_active","pagination__link","to","pagination__next","useDebounce","value","delay","debouncedValue","setDebouncedValue","timer","setTimeout","clearTimeout","useMediaQuery","initialValue","setValue","GET_MOVIE_INFO","LOADING_MOVIE","movie","credits","reviews","recommend","isFetchingMovie","catalogReducer","getMovieInfo","loadMovieInfo","connect","mainSearch","history","useHistory","main","main__offer","main__title","main__search","placeholder","onChange","e","target","onKeyDown","key","length","search__btn","aria-label","disabled","search__btn_tooltip","SET_PAGE_PARAMS","GET_GENRES","GET_MOVIES","sortedMovies","name","link","sortedTvs","isFetchingMovies","isFetchingGenres","movies","setPageParams","loadMovies","list","loadGenres","loadMovieWithGenre","Cards","scrollTo","getCorrectDate","date","split","reverse","join","defineGenres","movieGenres","allGenres","forEach","movieGenre","genre","cards","cards__list","item","item__image","item__link","src","poster_path","alt","title","original_title","original_name","item__rating","vote_average","toFixed","item__bottom","item__title","item__date","release_date","first_air_date","item__hovered","item__info","genre_ids","MainTemplate","main__wrapper","Sidebar","sort","isFilterClosed","setIsFilterClosed","sidebar","sidebar_close","sidebar__title","prevState","sidebar__item","sidebar__main","sidebar__subtitle","sidebar__list","sidebar__list_item","activeClassName","sidebar__link_active","sidebar__link","charAt","toUpperCase","substring","index","MemoizedSidebar","React","memo","moviesPage","sorted","match","pageId","isNaN","parseInt","GET_SEARCHED_MOVIES","SET_IS_SEARCH_OPEN","SET_IS_SEARCH_CLOSE","UPDATE_TEXT","initialStata","searchedMovies","isSearchOpen","SET_NEW_SESSION","LOGOUT","sessionId","isAuth","setNewSessionId","logout","localStorage","removeItem","autoLogout","time","headerSearch","auth","updateText","setIsSearchOpen","requestNewToken","setItem","location","replace","href","setIsSearchClose","isBurgerShown","isBurgerOpen","setIsBurgerOpen","debouncedText","document","body","overflow","header","header__wrapper","header__logo","xmlns","viewBox","cx","cy","r","fill","d","header__nav","header__nav_active","header__list","header__item","header__link_active","header__link","header__right","header__search_btn","height","data-original","header__search","header__search_active","search__wrap","search__active","header__searched_list","header__searched_list_active","header__searched_info","regexp","RegExp","media_type","header__searched_item","header__searched_link","dangerouslySetInnerHTML","__html","header__searched_indicator","getRelevantSearchAnswer","header__login","burger","burger_active","MainWrap","SearchPage","lazy","CatalogPage","requestSessionId","sessionInfo","session_id","autoLogin","getItem","session","fallback","exact","path","component","Main","Movie","Tv","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","combineReducers","catalogPage","applyMiddleware","thunkMiddleware","ReactDOM","render","StrictMode","getElementById"],"mappings":"mFACAA,EAAOC,QAAU,CAAC,OAAS,uBAAuB,gBAAkB,gCAAgC,YAAc,4BAA4B,mBAAqB,mCAAmC,aAAe,6BAA6B,aAAe,6BAA6B,oBAAsB,oCAAoC,cAAgB,8BAA8B,cAAgB,8BAA8B,eAAiB,+BAA+B,sBAAwB,sCAAsC,aAAe,6BAA6B,aAAe,6BAA6B,sBAAwB,sCAAsC,6BAA+B,6CAA6C,sBAAwB,sCAAsC,sBAAwB,sCAAsC,sBAAwB,sCAAsC,2BAA6B,2CAA2C,mBAAqB,mCAAmC,OAAS,uBAAuB,eAAiB,+BAA+B,OAAS,uBAAuB,cAAgB,gC,qBCA9rCD,EAAOC,QAAU,CAAC,QAAU,yBAAyB,cAAgB,+BAA+B,cAAgB,+BAA+B,eAAiB,gCAAgC,kBAAoB,mCAAmC,cAAgB,+BAA+B,mBAAqB,oCAAoC,cAAgB,+BAA+B,qBAAuB,wC,0FCDnaC,EAAW,+BACXC,EAAU,2CACVC,EAAW,kBAEJC,EAAM,CACfC,UAAU,WAAD,4BAAE,oDAAAC,EAAA,6DAAOC,EAAP,+BAAgB,QAASC,EAAzB,+BAAkC,UAAWC,EAA7C,+BAAoD,IAApD,SACgBC,MAAM,GAAD,OACrBT,EADqB,YACTM,EADS,YACCC,EADD,YACWN,GADX,OACqBC,EADrB,iBACsCM,IAF3D,cACDE,EADC,gBAIgCA,EAASC,OAJzC,uBAICC,EAJD,EAICA,QAASC,EAJV,EAIUA,YAJV,kBAKA,CAACD,EAASC,IALV,4CAAF,kDAAC,GAOVC,UAAU,WAAD,4BAAE,8CAAAT,EAAA,6DAAOC,EAAP,+BAAgB,QAAhB,SACgBG,MAAM,GAAD,OACrBT,EADqB,kBACHM,EADG,iBACYL,GADZ,OACsBC,IAF3C,cACDQ,EADC,gBAIkBA,EAASC,OAJ3B,uBAICI,EAJD,EAICA,OAJD,kBAKAA,GALA,2CAAF,kDAAC,GAOVC,kBAAkB,WAAD,4BAAE,oDAAAX,EAAA,6DAAOC,EAAP,+BAAgB,QAASW,EAAzB,+BAA8B,GAAIT,EAAlC,+BAAyC,IAAzC,SACQC,MAAM,GAAD,OACrBT,EADqB,qBACAM,EADA,YACUL,GADV,OACoBC,EADpB,yDAC6Ee,EAD7E,iBACwFT,IAFrG,cACTE,EADS,gBAIwBA,EAASC,OAJjC,uBAIPC,EAJO,EAIPA,QAASC,EAJF,EAIEA,YAJF,kBAKR,CAACD,EAASC,IALF,4CAAF,kDAAC,GAOlBK,OAAO,WAAD,4BAAE,WAAOC,EAAMC,GAAb,qCAAAf,EAAA,6DAAmBG,EAAnB,+BAA0B,IAA1B,SACmBC,MAAM,GAAD,OACrBT,EADqB,mBACFoB,EADE,YACMnB,GADN,OACgBC,EADhB,kBACkCiB,EADlC,iBAC+CX,IAFvE,cACEE,EADF,gBAIkDA,EAASC,OAJ3D,uBAIIC,EAJJ,EAIIA,QAASC,EAJb,EAIaA,YAAaQ,EAJ1B,EAI0BA,cAJ1B,kBAKG,CAACT,EAASC,EAAaQ,IAL1B,4CAAF,qDAAC,GAOPC,SAAS,WAAD,4BAAE,8CAAAjB,EAAA,6DAAOC,EAAP,+BAAgB,QAASW,EAAzB,gCACiBR,MAAM,GAAD,OACrBT,EADqB,YACTM,EADS,YACCW,EADD,YACOhB,GADP,OACiBC,IAFvC,cACAQ,EADA,gBAIeA,EAASC,OAJxB,cAIAY,EAJA,yBAKCA,GALD,2CAAF,kDAAC,GAOTC,WAAW,WAAD,4BAAE,8CAAAnB,EAAA,6DAAOC,EAAP,+BAAgB,QAASW,EAAzB,gCACeR,MAAM,GAAD,OACrBT,EADqB,YACTM,EADS,YACCW,EADD,oBACehB,GADf,OACyBC,IAF7C,cACFQ,EADE,gBAIaA,EAASC,OAJtB,cAIFY,EAJE,yBAKDA,GALC,2CAAF,kDAAC,GAOXE,oBAAoB,WAAD,4BAAE,sDAAApB,EAAA,6DAAOC,EAAP,+BAAgB,QAASW,EAAzB,uBAA6BS,EAA7B,uBAAoCC,EAApC,+BAA6C,GAA7C,SACMlB,MAAM,GAAD,OACrBT,EADqB,YACTM,EADS,YACCW,EADD,YACOS,EADP,YACgBzB,GADhB,OAC0B0B,IAFrC,cACXjB,EADW,gBAImBA,EAASC,OAJ5B,mBAITC,EAJS,EAITA,QAASgB,EAJA,EAIAA,cACDC,IAAZjB,EALa,0CAMNA,GANM,iCAQNgB,GARM,4CAAF,kDAAC,GAWpBE,sBAAsB,WAAD,4BAAE,kDAAAzB,EAAA,6DAAOC,EAAP,+BAAgB,QAASsB,EAAzB,uBAAmCpB,EAAnC,+BAA0C,EAA1C,SACIC,MAAM,GAAD,OACrBT,EADqB,qBACAM,EADA,YACUL,GADV,OACoBC,EADpB,kDACsE0B,EADtE,iBACuFpB,IAFhG,cACbE,EADa,gBAIOA,EAASC,OAJhB,uBAIXC,EAJW,EAIXA,QAJW,kBAKZA,GALY,4CAAF,kDAAC,GAOtBmB,YAAY,WAAD,4BAAE,gCAAA1B,EAAA,sEACcI,MAAM,GAAD,OACrBT,EADqB,qCACgBC,IAFnC,cACHS,EADG,gBAIuBA,EAASC,OAJhC,uBAIDqB,EAJC,EAIDA,cAJC,kBAKFA,GALE,2CAAF,kDAAC,GAOZC,aAAa,WAAD,4BAAE,WAAOC,GAAP,iBAAA7B,EAAA,sEACaI,MAAM,GAAD,OAAIT,EAAJ,qDAAyDkC,EAAzD,YAAkEjC,IADpF,cACJS,EADI,gBAEYA,EAASC,OAFrB,cAEJC,EAFI,yBAIHA,GAJG,2CAAF,mDAAC,K,mBCvEjBd,EAAOC,QAAU,CAAC,WAAa,+BAA+B,iBAAmB,qCAAqC,iBAAmB,qCAAqC,wBAA0B,4CAA4C,iBAAmB,qCAAqC,iBAAmB,qCAAqC,iBAAmB,qCAAqC,qBAAuB,2C,kBCAnbD,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,YAAc,2BAA2B,KAAO,oBAAoB,cAAgB,6BAA6B,YAAc,2BAA2B,aAAe,4BAA4B,aAAe,4BAA4B,YAAc,2BAA2B,WAAa,0BAA0B,kBAAoB,iCAAiC,uBAAyB,sCAAsC,uBAAyB,wC,gGCE/eoC,EAAS,WAAO,IAAD,EACgBC,YAAW,CAC/CC,SAAS,EACTC,UAAW,cAAC,IAAD,CAAMC,MAAM,SAFnBC,EADgB,EAChBA,eAAgBC,EADA,EACAA,YAIxB,OACI,iDAASC,MAAO,CAACH,MAAO,OAAQI,UAAW,WAAeH,GAA1D,aACKC,O,iBCTb3C,EAAOC,QAAU,CAAC,KAAO,mBAAmB,YAAc,0BAA0B,aAAe,2BAA2B,YAAc,0BAA0B,YAAc,0BAA0B,oBAAsB,oC,kGCEvN6C,EAAY,SAAC,GAAgB,IAAfC,EAAc,EAAdA,SACvB,OACI,qBAAKC,UAAWC,IAAEC,UAAlB,SACKH,M,0NCJPI,EAAqB,4CACrBC,EAAuB,8CACvBC,EAAqB,4CACrBC,EAA0B,iDAE1BC,EAAe,CACjBC,WAAY,GACZ1C,QAAS,GACT2C,WAAY,EACZC,aAAc,EACdC,YAAa,EACbC,mBAAmB,GAEVC,EAAoB,WAAmC,IAAlCC,EAAiC,uDAAzBP,EAAcQ,EAAW,uCAC/D,OAAQA,EAAOzC,MACX,KAAK6B,EACD,OAAO,2BACAW,GADP,IAEIhD,QAASiD,EAAOjD,QAChB2C,WAAYM,EAAON,WACnBC,aAAcK,EAAOL,aACrBE,mBAAmB,IAG3B,KAAKP,EACD,OAAO,2BACAS,GADP,IAEIN,WAAYO,EAAO1C,OAG3B,KAAK+B,EACD,OAAO,2BACAU,GADP,IAEIH,YAAaI,EAAOrD,KACpBkD,mBAAmB,IAG3B,KAAKN,EACD,OAAO,2BACAQ,GADP,IAEIhD,QAAS,GACT4C,aAAc,IAGtB,QACI,OAAOI,IAKNE,EAAmB,SAAC3C,GAC7B,MAAO,CACHC,KAAM+B,EACNhC,SAGK4C,EAAmB,SAACnD,EAAS2C,EAAYC,GAClD,MAAO,CACHpC,KAAM6B,EACNrC,UACA2C,aACAC,iBAGKQ,EAAqB,SAACxD,GAC/B,MAAO,CACHY,KAAM8B,EACN1C,SAGKyD,EAAuB,WAChC,MAAO,CACH7C,KAAMgC,IAIDc,EAAoB,SAAC/C,EAAMb,GAAsB,IAAdE,EAAa,uDAAN,EACnD,8CAAO,WAAO2D,GAAP,uBAAA9D,EAAA,sEAEC8D,EAASH,EAAmBxD,IAF7B,SAGmDL,IAAIe,OAClDC,EACAb,EACAE,GANL,mCAGQI,EAHR,KAGiB2C,EAHjB,KAG6BC,EAH7B,KAQCW,EAASJ,EAAiBnD,EAAS2C,EAAYC,IARhD,kDAUCY,MAAM,6EAAD,MAVN,0DAAP,wD,uHC3ESC,EAAa,SAAC,GAAwE,IAAvEd,EAAsE,EAAtEA,WAAWE,EAA2D,EAA3DA,YAA2D,IAA9Ca,oBAA8C,MAA/B,GAA+B,EAA3BC,EAA2B,EAA3BA,YAA2B,IAAfC,WAAe,MAAT,GAAS,IAC1DC,mBAASH,GADiD,mBACvFI,EADuF,KAC3EC,EAD2E,KAExFC,EAAcC,KAAKC,KAAKvB,EAAamB,GAC3CK,qBAAU,WACN,IAAMC,EAAaC,OAAOC,WAAW,sBAC/BC,EAAqB,WACnBH,EAAWI,QACXT,EAAc,GAEdA,EAAc,KAMtB,OAHAK,EAAWK,YAAYF,GACvBA,IACAG,EAAcC,EAAYX,EAAaF,EAAYjB,IAC5C,WACHuB,EAAWQ,eAAeL,MAE/B,CAAC1B,EAAaiB,EAAYE,IAG7B,IADA,IAAMa,EAAQ,GACLC,EAAI,EAAGA,GAAKnC,EAAYmC,IAC7BD,EAAME,KAAKD,GAGf,IAAMH,EAAc,SAACX,EAAaN,EAAcb,GAC5C,IAAK,IAAIiC,EAAI,EAAGA,GAAKd,EAAac,IAC9B,IAAMA,EAAI,GAAKpB,EAAe,GAAKb,GAAeA,GAAeiC,EAAIpB,EACjE,OAAOoB,GA5B2E,EAiC1DjB,mBAASc,EAAYX,EAAaF,EAAYjB,IAjCY,mBAiCvFmC,EAjCuF,KAiC3EN,EAjC2E,KAkCxFO,GAAmBD,EAAa,GAAKlB,EAAa,EAClDoB,EAAgBF,EAAalB,EAEnC,OACI,sBAAK5B,UAAWC,IAAEgD,WAAlB,UACI,wBACIjD,UACI8C,EAAa,EAAb,UACS7C,IAAEiD,kBADX,UAESjD,IAAEiD,iBAFX,YAE+BjD,IAAEkD,sBAErCC,QAAS,WACLZ,EAAcM,EAAa,MAK/B,oBAAI9C,UAAWC,IAAEoD,iBAAjB,SACKV,EACIlF,QACG,SAACC,GAAD,OACIA,GAAQqF,GAAmBrF,GAAQsF,KAE1CM,KAAI,SAAC5F,GACF,OACI,oBAEIsC,WACKtC,KAAUiD,EAAX,UACSV,IAAEsD,iBADX,YAC+BtD,IAAEuD,yBADjC,UAESvD,IAAEsD,kBALnB,SAQI,cAAC,IAAD,CACIvD,UAAWC,IAAEwD,iBACbC,GAAE,WAAMjC,GAAN,OACU,KAARC,EAAa,GAAb,WAAsBA,GADxB,iBAEOhE,GAJb,SAMKA,KAbAA,QAoB7B,wBACIsC,UACI8B,EAAcgB,EAAd,UACS7C,IAAE0D,kBADX,UAES1D,IAAE0D,iBAFX,YAE+B1D,IAAEkD,sBAErCC,QAAS,WACLZ,EAAcM,EAAa,W,iFCzFlCc,EAAc,SAACC,EAAOC,GAAW,IAAD,EACKnC,mBAASkC,GADd,mBACjCE,EADiC,KACjBC,EADiB,KAWzC,OATA/B,qBAAU,WACN,IAAMgC,EAAQC,YAAW,WACrBF,EAAkBH,KACnBC,GAEH,OAAO,WACHK,aAAaF,MAElB,CAAEJ,EAAOC,IACLC,I,iFCXEK,EAAgB,SAACxF,GAAgC,IAAzByF,IAAwB,2DAC/B1C,mBAAS0C,GADsB,mBAClDR,EADkD,KAC3CS,EAD2C,KAiBzD,OAfArC,qBAAU,WACN,IAAMC,EAAaC,OAAOC,WAAWxD,GAC/ByD,EAAqB,WACnBH,EAAWI,QACXgC,GAAS,GAETA,GAAS,IAKjB,OAFApC,EAAWK,YAAYF,GACvBA,IACO,WACHH,EAAWQ,eAAeL,MAE/B,CAACzD,IACGiF,I,2ICjBLU,EAAiB,qCACjBC,EAAgB,oCAEhBjE,EAAe,CACjBkE,MAAO,GACPC,QAAS,GACTC,QAAS,GACT7F,SAAU,GACV8F,UAAW,GACXC,iBAAiB,GAERC,EAAiB,WAAmC,IAAlChE,EAAiC,uDAAzBP,EAAcQ,EAAW,uCAC5D,OAAQA,EAAOzC,MACX,KAAKiG,EACD,OAAO,2BACAzD,GADP,IAEI2D,MAAO1D,EAAO0D,MACdC,QAAS3D,EAAO2D,QAChBC,QAAS5D,EAAO4D,QAChB7F,SAAUiC,EAAOjC,SACjB8F,UAAW7D,EAAO6D,UAClBC,iBAAiB,IAGzB,KAAKL,EACD,OAAO,2BACA1D,GADP,IAEI+D,iBAAiB,IAGzB,QACI,OAAO/D,IAINiE,EAAe,SAACN,EAAOC,EAASC,EAAS7F,EAAU8F,GAC5D,MAAO,CACHtG,KAAMiG,EACNE,QACAC,UACAC,UACA7F,WACA8F,cASKI,EAAgB,SAACxH,EAAQW,GAClC,8CAAO,WAAOkD,GAAP,uBAAA9D,EAAA,sEAEC8D,EARD,CACH/C,KAAMkG,IAKH,SAGqBnH,IAAImB,SAAShB,EAAQW,GAH1C,cAGOsG,EAHP,gBAIuBpH,IAAIqB,WAAWlB,EAAQW,GAJ9C,cAIOuG,EAJP,iBAKuBrH,IAAIsB,oBAAoBnB,EAAQW,EAAI,WAL3D,eAKOwG,EALP,iBAMwBtH,IAAIsB,oBAAoBnB,EAAQW,EAAI,YAN5D,eAMOW,EANP,iBAOyBzB,IAAIsB,oBACxBnB,EACAW,EACA,kBACA,mBAXL,QAOOyG,EAPP,OAaCvD,EAAS0D,EAAaN,EAAOC,EAASC,EAAS7F,EAAU8F,IAb1D,kDAeCtD,MAAM,kEAAD,MAfN,0DAAP,wD,iBCrDJtE,EAAOC,QAAU,CAAC,UAAY,+B,gBCA9BD,EAAOC,QAAU,CAAC,cAAgB,sC,gBCAlCD,EAAOC,QAAU,CAAC,KAAO,qB,6KCqDVgI,eALS,SAACnE,GACrB,MAAO,CACHN,WAAYM,EAAMoE,WAAW1E,cAGG,CACpCQ,sBADWiE,EA/CF,SAAC,GAAsC,IAApCzE,EAAmC,EAAnCA,WAAYQ,EAAuB,EAAvBA,iBAClBmE,EAAUC,cAEhB,OACI,yBAASpF,UAAWC,IAAEoF,KAAtB,SACI,cAACvF,EAAA,EAAD,UACI,sBAAKE,UAAWC,IAAEqF,YAAlB,UACI,oBAAItF,UAAWC,IAAEsF,YAAjB,iKAGA,sBAAKvF,UAAWC,IAAEuF,aAAlB,UACI,uBACIlH,KAAK,OACLmH,YAAY,2HACZ5B,MAAOrD,EACPkF,SAAU,SAACC,GAAD,OAAO3E,EAAiB2E,EAAEC,OAAO/B,QAC3CgC,UAAW,SAACF,GAAD,MACI,UAAVA,EAAEG,KAAmBtF,EAAWuF,OAAS,GAC1CZ,EAAQtC,KAAK,oBAGrB,yBACI7C,UAAWC,IAAE+F,YACb5C,QAAS,WACL+B,EAAQtC,KAAK,kBAEjBoD,aAAW,2LACXC,SAAgC,IAAtB1F,EAAWuF,OANzB,2CAS2B,IAAtBvF,EAAWuF,QACR,sBAAM/F,UAAWC,IAAEkG,oBAAnB,8I,6CCpC1BC,EAAkB,qCAClBC,EAAa,gCACbC,EAAa,gCAEb/F,EAAe,CACjBgG,aAAc,CACV,CAAEC,KAAM,+DAAcC,KAAM,WAC5B,CAAED,KAAM,kFAAkBC,KAAM,eAChC,CAAED,KAAM,uCAAUC,KAAM,aACxB,CAAED,KAAM,iCAASC,KAAM,aAE3BC,UAAW,CACP,CAAEF,KAAM,+DAAcC,KAAM,WAC5B,CAAED,KAAM,wCAAWC,KAAM,gBACzB,CAAED,KAAM,uCAAUC,KAAM,aACxB,CAAED,KAAM,kFAAkBC,KAAM,eAEpCjJ,OAAQ,CAAC,KAAM,SACfmJ,kBAAkB,EAClBC,kBAAkB,EAClBC,OAAQ,GACR5I,OAAQ,GACR0C,YAAa,IACbF,WAAY,EACZiB,IAAK,WA+BIpE,EAAY,SAACuJ,EAAQpG,GAC9B,MAAO,CACHnC,KAAMgI,EACNO,SACApG,eASKqG,EAAgB,SAACrJ,EAAQC,GAClC,MAAO,CACHY,KAAM8H,EACN3I,SACAC,SAIKqJ,EAAa,SAACvJ,GAA4C,IAApCC,EAAmC,uDAA1B,UAAWC,EAAe,uDAAR,IAC1D,8CAAO,WAAO2D,GAAP,qBAAA9D,EAAA,sEAEC8D,EAASyF,EAAcrJ,EAAQC,IAFhC,SAGkCL,IAAIC,UAAUE,EAAQC,EAAQC,GAHhE,mCAGQsJ,EAHR,KAGcvG,EAHd,KAICY,EAAS/D,EAAU0J,EAAMvG,IAJ1B,kDAMCa,MAAM,2CAAD,MANN,0DAAP,uDAUS2F,EAAa,SAACzJ,GACvB,8CAAO,WAAO6D,GAAP,eAAA9D,EAAA,+EAEoBF,IAAIW,UAAUR,GAFlC,OAEOwJ,EAFP,OAGC3F,EA5BD,CACH/C,KAAM+H,EACNpI,OA0BuB+I,IAHpB,gDAKC1F,MAAM,2CAAD,MALN,yDAAP,uDASS4F,EAAqB,SAAC1J,GAAiC,IAAzBW,EAAwB,uDAAnB,GAAIT,EAAe,uDAAR,IACvD,8CAAO,WAAO2D,GAAP,qBAAA9D,EAAA,sEAEC8D,EAASyF,EAAc3I,EAAIT,IAF5B,SAGkCL,IAAIa,kBACjCV,EACAW,EACAT,GANL,mCAGQsJ,EAHR,KAGcvG,EAHd,KAQCY,EAAS/D,EAAU0J,EAAMvG,IAR1B,kDAUCa,MAAM,2CAAD,MAVN,0DAAP,uD,yBC/FS6F,EAAQ,SAAC,GAAmE,IAAjEN,EAAgE,EAAhEA,OAAQ5I,EAAwD,EAAxDA,OAAQwD,EAAgD,EAAhDA,YAAad,EAAmC,EAAnCA,YAAaF,EAAsB,EAAtBA,WAAYiB,EAAU,EAAVA,IAC1EO,qBAAU,WACNE,OAAOiF,SAAS,EAAG,KACpB,IACH,IAAMC,EAAiB,SAACC,GACpB,QAAavI,IAATuI,EACA,OAAOA,EAAKC,MAAM,KAAKC,UAAUC,KAAK,MAGxCC,EAAe,SAACC,GAClB,IAAIC,EAAY,GAQhB,OAPAD,EAAYE,SAAQ,SAACC,GACjB7J,EAAO4J,SAAQ,SAACE,GACRD,IAAeC,EAAM5J,IACrByJ,EAAU/E,KAAKkF,EAAMvB,YAI1BoB,EAAUH,KAAK,OAE1B,OACI,sBAAKzH,UAAWC,IAAE+H,MAAlB,UACI,oBAAIhI,UAAWC,IAAEgI,YAAjB,SACKpB,EAAOvD,KAAI,SAACmB,GACT,OACI,qBAAmBzE,UAAWC,IAAEiI,KAAhC,UACI,qBAAKlI,UAAWC,IAAEkI,YAAlB,SACI,cAAC,IAAD,CACIzE,GAAE,mBAAcjC,EAAd,YAA6BgD,EAAMtG,IACrC6B,UAAWC,IAAEmI,WAFjB,SAII,qBACIC,IAC0B,OAAtB5D,EAAM6D,YAAN,yCACwC7D,EAAM6D,aACxC,mHAEVC,IAAM9D,EAAM+D,OAAS/D,EAAMgE,gBAAoBhE,EAAM+B,MAAQ/B,EAAMiE,cACnEF,MAAQ/D,EAAM+D,OAAS/D,EAAMgE,gBAAoBhE,EAAM+B,MAAQ/B,EAAMiE,cACrEnJ,QAAQ,aAIpB,qBAAKS,UAAWC,IAAE0I,aAAlB,SACI,+BAAOlE,EAAMmE,aAAaC,QAAQ,OAEtC,sBAAK7I,UAAWC,IAAE6I,aAAlB,UACI,qBAAK9I,UAAWC,IAAE8I,YAAlB,SACI,cAAC,IAAD,CAAMrF,GAAE,mBAAcjC,EAAd,YAA6BgD,EAAMtG,IAA3C,SACMsG,EAAM+D,OAAS/D,EAAMgE,gBAAoBhE,EAAM+B,MAAQ/B,EAAMiE,kBAGvE,qBAAK1I,UAAWC,IAAE+I,WAAlB,SACK3B,EAAe5C,EAAMwE,eAAiB5B,EAAe5C,EAAMyE,qBAGpE,qBAAKlJ,UAAWC,IAAEkJ,cAAlB,SACI,cAAC,IAAD,CAAMzF,GAAE,mBAAcjC,EAAd,YAA6BgD,EAAMtG,IAA3C,SACI,sBAAK6B,UAAWC,IAAEmJ,WAAlB,UACI,kFACc,IACV,+BACM3E,EAAM+D,OAAS/D,EAAMgE,gBAAoBhE,EAAM+B,MAAQ/B,EAAMiE,mBAGvE,gEACW,IACP,+BACKhB,EAAajD,EAAM4E,gBAG5B,+FACiB,IACb,+BACKhC,EAAe5C,EAAMwE,eAAgB5B,EAAe5C,EAAMyE,8BAjD1EzE,EAAMtG,SA2D3B,cAACoD,EAAA,EAAD,CACId,WAAYA,EACZE,YAAaA,EACbc,YAAaA,EACbC,IAAKA,Q,yBCzFR4H,EAAe,SAAC,GAAgB,IAAfvJ,EAAc,EAAdA,SAC1B,OACI,kCACI,cAACD,EAAA,EAAD,UACI,qBAAKE,UAAWC,IAAEsJ,cAAlB,SAAkCxJ,S,iBCJrCyJ,EAAU,SAAC,GAAmC,IAAjCvL,EAAgC,EAAhCA,OAAQwL,EAAwB,EAAxBA,KAAMhI,EAAkB,EAAlBA,YAAkB,EACVE,oBAAS,GADC,mBAC/C+H,EAD+C,KAC/BC,EAD+B,KAOtD,OACI,wBACI3J,UAAS,UAAKC,IAAE2J,QAAP,YAAkBF,EAAiBzJ,IAAE4J,cAAgB,IADlE,UAGI,oBACI7J,UAAWC,IAAE6J,eACb1G,QAAS,kBAAMuG,GAAkB,SAACI,GAAD,OAAgBA,MAFrD,wDAMA,qBAAK/J,UAAWC,IAAE+J,cAAlB,SACI,sBAAKhK,UAAWC,IAAEgK,cAAlB,UACI,oBAAIjK,UAAWC,IAAEiK,kBAAjB,sCACA,oBAAIlK,UAAWC,IAAEkK,cAAjB,SACKlM,EAAOqF,KAAI,SAACyE,GACT,OACI,oBAEI/H,UAAWC,IAAEmK,mBAFjB,SAII,cAAC,IAAD,CACIC,gBAAiBpK,IAAEqK,qBACnBtK,UAAWC,IAAEsK,cACb7G,GAAE,WAAMjC,EAAN,YAAqBsG,EAAM5J,IAHjC,UAxBDqI,EA6B4BuB,EAAMvB,KA5BtDA,EAAKgE,OAAO,GAAGC,cAAgBjE,EAAKkE,UAAU,OAoBpB3C,EAAM5J,IArBb,IAACqI,YAqCvB,qBAAKxG,UAAWC,IAAE+J,cAAlB,SACI,sBAAKhK,UAAWC,IAAEgK,cAAlB,UACI,oBAAIjK,UAAWC,IAAEiK,kBAAjB,sFACA,oBAAIlK,UAAWC,IAAEkK,cAAjB,SACKV,EAAKnG,KAAI,SAAC4E,EAAMyC,GACb,OACI,oBAEI3K,UAAWC,IAAEmK,mBAFjB,SAII,cAAC,IAAD,CACIC,gBAAiBpK,IAAEqK,qBACnBtK,UAAWC,IAAEsK,cACb7G,GAAE,WAAMjC,EAAN,YAAqByG,EAAKzB,MAHhC,SAKKyB,EAAK1B,QARLmE,iBAmB5BC,EAAkBC,IAAMC,KAAKtB,GCa3BvE,mBAbf,SAAyBnE,GACrB,MAAO,CACH+F,OAAQ/F,EAAMiK,WAAWlE,OACzBD,iBAAkB9F,EAAMiK,WAAWnE,iBACnCD,iBAAkB7F,EAAMiK,WAAWpE,iBACnCqE,OAAQlK,EAAMiK,WAAWxE,aACzBtI,OAAQ6C,EAAMiK,WAAW9M,OACzBT,OAAQsD,EAAMiK,WAAWvN,OAAO,GAChCmD,YAAaG,EAAMiK,WAAWpK,YAC9BF,WAAYK,EAAMiK,WAAWtK,WAC7BiB,IAAKZ,EAAMiK,WAAWrJ,OAGU,CACpCuF,aACAF,aACAG,sBAHWjC,EAvED,SAAC,GAgBR,IAfH4B,EAeE,EAfFA,OACAD,EAcE,EAdFA,iBACAD,EAaE,EAbFA,iBACAqE,EAYE,EAZFA,OACA/M,EAWE,EAXFA,OACAT,EAUE,EAVFA,OACAmD,EASE,EATFA,YACAF,EAQE,EARFA,WACAiB,EAOE,EAPFA,IACAuF,EAME,EANFA,WACAF,EAKE,EALFA,WACAG,EAIE,EAJFA,mBAIE,IAHF+D,MACIpM,OAAUV,EAEZ,EAFYA,GAAI+M,EAEhB,EAFgBA,OAiBlB,OAdAjJ,qBAAU,WACgB,KAAlBhE,EAAO8H,QAAmC,IAAlB9H,EAAO8H,OAC/BkB,EAAWzJ,QACGuB,IAAPZ,EACP4I,EAAWvJ,GACJ2N,MAAMC,SAASjN,IACtB4I,EAAWvJ,EAAQW,EAAI+M,IACQ,IAAxBC,MAAMC,SAASjN,IACtB+I,EAAmB1J,EAAQW,EAAI+M,GAE/BnE,EAAWvJ,EAAQW,EAAI+M,KAE5B,CAAC1N,EAAQS,EAAO8H,OAAQ5H,EAAI8I,EAAYC,EAAoBH,EAAYmE,IAGvE,eAAC,EAAD,YAC0B,IAArBtE,EACG,cAACgE,EAAD,CACI3M,OAAQA,EACRwL,KAAMuB,EACNvJ,YAAajE,IAGjB,cAAC6B,EAAA,EAAD,KAEkB,IAArBsH,EACG,cAAC,EAAD,CACIlF,YAAajE,EACbqJ,OAAQA,EACR5I,OAAQA,EACR0C,YAAaA,EACbF,WAAYA,EACZiB,IAAKA,IAGT,cAACrC,EAAA,EAAD,UCkBD4F,mBAbf,SAAyBnE,GACrB,MAAO,CACH+F,OAAQ/F,EAAMiK,WAAWlE,OACzBD,iBAAkB9F,EAAMiK,WAAWnE,iBACnCD,iBAAkB7F,EAAMiK,WAAWpE,iBACnCqE,OAAQlK,EAAMiK,WAAWrE,UACzBzI,OAAQ6C,EAAMiK,WAAW9M,OACzBT,OAAQsD,EAAMiK,WAAWvN,OAAO,GAChCmD,YAAaG,EAAMiK,WAAWpK,YAC9BF,WAAYK,EAAMiK,WAAWtK,WAC7BiB,IAAKZ,EAAMiK,WAAWrJ,OAGU,CACpCuF,aACAF,aACAG,sBAHWjC,EAtEJ,SAAC,GAgBL,IAfH4B,EAeE,EAfFA,OACAD,EAcE,EAdFA,iBACAD,EAaE,EAbFA,iBACAqE,EAYE,EAZFA,OACA/M,EAWE,EAXFA,OACAT,EAUE,EAVFA,OACAmD,EASE,EATFA,YACAF,EAQE,EARFA,WACAiB,EAOE,EAPFA,IACAuF,EAME,EANFA,WACAF,EAKE,EALFA,WACAG,EAIE,EAJFA,mBAIE,IAHF+D,MACIpM,OAAUV,EAEZ,EAFYA,GAAI+M,EAEhB,EAFgBA,OAiBlB,OAdAjJ,qBAAU,WACgB,KAAlBhE,EAAO8H,QAAmC,IAAlB9H,EAAO8H,OAC/BkB,EAAWzJ,QACGuB,IAAPZ,EACP4I,EAAWvJ,GACJ2N,MAAMC,SAASjN,IACtB4I,EAAWvJ,EAAQW,EAAI+M,IACQ,IAAxBC,MAAMC,SAASjN,IACtB+I,EAAmB1J,EAAQW,EAAI+M,GAE/BnE,EAAWvJ,EAAQW,EAAI+M,KAE5B,CAAC1N,EAAQS,EAAO8H,OAAQ5H,EAAI8I,EAAYC,EAAoBH,EAAYmE,IAGvE,eAAC,EAAD,YAC0B,IAArBtE,EACG,cAACgE,EAAD,CACI3M,OAAQA,EACRwL,KAAMuB,EACNvJ,YAAajE,IAGjB,cAAC6B,EAAA,EAAD,KAEkB,IAArBsH,EACG,cAAC,EAAD,CACIlF,YAAajE,EACbqJ,OAAQA,EACR5I,OAAQA,EACR0C,YAAaA,EACbF,WAAYA,EACZiB,IAAKA,IAGT,cAACrC,EAAA,EAAD,U,gBC9DVgM,EAAsB,yCACtBC,EAAqB,wCACrBC,EAAsB,yCACtBC,EAAc,iCACdlL,EAA0B,6CAE1BmL,EAAe,CACjBC,eAAgB,GAChBlL,WAAY,GACZmL,cAAc,GCTZC,EAAkB,mCAClBC,GAAS,0BAETtL,GAAe,CACjBuL,UAAW,KACXC,QAAQ,GAsBCC,GAAkB,SAACF,GAC5B,MAAO,CACHxN,KAAMsN,EACNE,cAGKG,GAAS,WAElB,OADAC,aAAaC,WAAW,aACjB,CACH7N,KAAMuN,KAoCDO,GAAa,SAACC,GACvB,OAAO,SAAChL,GACJ6C,YAAW,WACP7C,EAAS4K,QACVI,K,kBCsTIpH,oBATf,SAAyBnE,GACrB,MAAO,CACHN,WAAYM,EAAMwL,aAAa9L,WAC/BqG,OAAQ/F,EAAMwL,aAAaZ,eAC3BC,aAAc7K,EAAMwL,aAAaX,aACjCI,OAAQjL,EAAMyL,KAAKR,UAIa,CACpCS,WFpVsB,SAACnO,GACvB,MAAO,CACHC,KAAMkN,EACNnN,SEkVJ4C,iBFzT4B,SAAC5C,EAAMC,GACnC,8CAAO,WAAO+C,GAAP,mBAAA9D,EAAA,+EAEyBF,IAAIe,OAAOC,EAAMC,GAF1C,mCAEQR,EAFR,KAGCuD,EAzBD,CACH/C,KAAM+M,EACNxE,OAuB+B/I,IAH5B,gDAKCwD,MAAM,kDAAD,MALN,yDAAP,uDEyTAH,qBF1UgC,WAChC,MAAO,CACH7C,KAAMgC,IEyUVmM,gBFtU2B,WAC3B,MAAO,CACHnO,KAAMgN,IEqUVoB,gBD/V2B,WAC3B,8CAAO,WAAOrL,GAAP,eAAA9D,EAAA,sEAEC8D,EAAS4K,MAFV,SAGqB5O,IAAI4B,cAHzB,OAGOG,EAHP,OAIC8M,aAAaS,QAAQ,QAASvN,GAC9B+C,OAAOyK,SAASC,QAAhB,kDAC+CzN,EAD/C,wBACoE+C,OAAOyK,SAASE,OANrF,gDASCxL,MAAM,yEAAD,MATN,yDAAP,uDC+VA2K,UACAc,iBFpU4B,WAC5B,MAAO,CACHzO,KAAMiN,KE2TCtG,EApXA,SAAC,GAYT,IAXHuH,EAWE,EAXFA,WACAhM,EAUE,EAVFA,WACAS,EASE,EATFA,iBACA4F,EAQE,EARFA,OACA1F,EAOE,EAPFA,qBACAwK,EAME,EANFA,aACAc,EAKE,EALFA,gBACAM,EAIE,EAJFA,iBACAL,EAGE,EAHFA,gBACAX,EAEE,EAFFA,OACAE,EACE,EADFA,OAEMe,EAAgB5I,aAAc,sBAAsB,GADxD,EAEsCzC,oBAAS,GAF/C,mBAEKsL,EAFL,KAEmBC,EAFnB,KAGIC,EAAgBvJ,aAAYpD,EAAY,KAE9CyB,qBAAU,WAEFmL,SAASC,KAAKzN,MAAM0N,SADpBL,EAC+B,SAEA,KAEpC,CAACA,IAEJhL,qBAAU,WACFkL,EAAcpH,OAAS,EACvB9E,EAAiBkM,EAAe,SAEhChM,MAEL,CAACgM,EAAelM,EAAkBE,IAqIrC,OACI,wBAAQnB,UAAWC,IAAEsN,OAArB,SACI,cAACzN,EAAA,EAAD,UACI,sBAAKE,UAAWC,IAAEuN,gBAAlB,UACI,qBAAKxN,UAAWC,IAAEwN,aAAcrK,QAAS2J,EAAzC,SACI,cAAC,IAAD,CAAMrJ,GAAG,IAAT,SACI,sBACIgK,MAAM,6BACNC,QAAQ,cAFZ,UAII,wBACIC,GAAG,MACHC,GAAG,MACHC,EAAE,MACFC,KAAK,YAET,sBACIC,EAAE,iKACFD,KAAK,YAET,sBACIA,KAAK,UACLC,EAAE,yCAEN,sBACID,KAAK,UACLC,EAAE,yCAEN,sBACID,KAAK,OACLC,EAAE,wCAEN,sBACID,KAAK,UACLC,EAAE,wCAEN,sBACID,KAAK,UACLC,EAAE,6CAEN,sBACID,KAAK,UACLC,EAAE,yCAEN,mBAAGD,KAAK,UAAR,SACI,sBAAMC,EAAE,mGAEZ,mBAAGD,KAAK,UAAR,SACI,sBAAMC,EAAE,mGAEZ,sBACID,KAAK,OACLC,EAAE,gEAEN,sBACID,KAAK,UACLC,EAAE,0DAEN,sBACID,KAAK,UACLC,EAAE,6DAEN,sBACID,KAAK,UACLC,EAAE,yCAEN,mBAAGD,KAAK,UAAR,SACI,sBAAMC,EAAE,wHAEZ,mBAAGD,KAAK,UAAR,SACI,sBAAMC,EAAE,gIAKxB,qBACIhO,UACIiN,EAAY,UACHhN,IAAEgO,YADC,YACchO,IAAEiO,oBADhB,UAEHjO,IAAEgO,aAJnB,SAOI,qBAAIjO,UAAWC,IAAEkO,aAAjB,UACI,oBAAInO,UAAWC,IAAEmO,aAAjB,SACI,cAAC,IAAD,CACI/D,gBAAiBpK,IAAEoO,oBACnBrO,UAAWC,IAAEqO,aACb5K,GAAG,SACHN,QAAS,WACL2J,IACAG,GAAgB,IANxB,oDAYJ,oBAAIlN,UAAWC,IAAEmO,aAAjB,SACI,cAAC,IAAD,CACI/D,gBAAiBpK,IAAEoO,oBACnBrO,UAAWC,IAAEqO,aACb5K,GAAG,MACHN,QAAS,WACL2J,IACAG,GAAgB,IANxB,+DAcZ,sBAAKlN,UAAWC,IAAEsO,cAAlB,UACI,wBACIvO,UAAWC,IAAEuO,mBACbpL,QAAS,kBAAMqJ,KAFnB,SAII,qBACIiB,MAAM,6BACNjO,MAAM,MACNgP,OAAO,MACPd,QAAQ,sBAJZ,SAMI,sBACIK,EAAE,8ZACFD,KAAK,OACLW,gBAAc,UACdhB,MAAM,mCAIlB,sBACI1N,WACqB,IAAjB2L,EAAA,UACS1L,IAAE0O,eADX,YAC6B1O,IAAE2O,uBAD/B,UAES3O,IAAE0O,gBAJnB,UAOI,qBAAK3O,UAAWC,IAAE4O,aAAlB,SACI,uBACI7O,WACqB,IAAjB2L,EAAA,UACS1L,IAAE7B,OADX,YACqB6B,IAAE6O,gBADvB,UAES7O,IAAE7B,QAEfqH,YAAY,2HACZnH,KAAK,OACLuF,MAAOrD,EACPkF,SAAU,SAACC,GACP6G,EAAW7G,EAAEC,OAAO/B,YAIhC,oBACI7D,WACqB,IAAjB2L,EAAA,UACS1L,IAAE8O,sBADX,YACoC9O,IAAE+O,8BADtC,UAES/O,IAAE8O,uBAJnB,SA5RQ,WAC5B,GAAsB,IAAlBlI,EAAOd,QAAgBvF,EAAWuF,OAAS,EAC3C,OACI,oBAAI/F,UAAWC,IAAEgP,sBAAjB,mRAID,GAAsB,IAAlBpI,EAAOd,QAAsC,IAAtBvF,EAAWuF,OACzC,OACI,oBAAI/F,UAAWC,IAAEgP,sBAAjB,wKAKJ,IAAMC,EAAS,IAAIC,OAAO3O,EAAY,KACtC,OAAOqG,EACFpJ,QAAO,SAACgH,GAAD,MAAgC,WAArBA,EAAM2K,cACxB9L,KAAI,SAACmB,GACF,IAAM+B,GACF/B,EAAM+D,OACN/D,EAAMgE,gBACNhE,EAAM+B,MACN/B,EAAMiE,eACRmE,QACEqC,EANS,oGAOoF1O,EAPpF,YASb,OACI,oBAEIR,UAAWC,IAAEoP,sBACbjM,QAAS,WACLqJ,IACAtL,KALR,SAQI,eAAC,IAAD,CACIuC,GAAE,mBAAce,EAAM2K,WAApB,YAAkC3K,EAAMtG,IAC1C6B,UAAWC,IAAEqP,sBAFjB,UAI0B,UAArB7K,EAAM2K,WACH,sBACI1B,MAAM,6BACNC,QAAQ,cAFZ,UAII,wBACIC,GAAG,MACHC,GAAG,MACHC,EAAE,MACFC,KAAK,YAET,sBACIC,EAAE,iKACFD,KAAK,YAET,sBACIA,KAAK,UACLC,EAAE,yCAEN,sBACID,KAAK,UACLC,EAAE,yCAEN,sBACID,KAAK,OACLC,EAAE,wCAEN,sBACID,KAAK,UACLC,EAAE,wCAEN,sBACID,KAAK,UACLC,EAAE,6CAEN,sBACID,KAAK,UACLC,EAAE,yCAEN,mBAAGD,KAAK,UAAR,SACI,sBAAMC,EAAE,mGAEZ,mBAAGD,KAAK,UAAR,SACI,sBAAMC,EAAE,mGAEZ,sBACID,KAAK,OACLC,EAAE,gEAEN,sBACID,KAAK,UACLC,EAAE,0DAEN,sBACID,KAAK,UACLC,EAAE,6DAEN,sBACID,KAAK,UACLC,EAAE,yCAEN,mBAAGD,KAAK,UAAR,SACI,sBAAMC,EAAE,wHAEZ,mBAAGD,KAAK,UAAR,SACI,sBAAMC,EAAE,4HAIhB,qBACIN,MAAM,6BACNC,QAAQ,cAFZ,SAII,sBAAMK,EAAE,0DAGhB,sBACIuB,wBAAyB,CACrBC,OAAO,GAAD,OAAKhJ,MAGnB,sBAAMxG,UAAWC,IAAEwP,2BAAnB,SAC0B,UAArBhL,EAAM2K,WACD,iCACA,6CA/FT3K,EAAMtG,OAsQNuR,QAGR3D,EACG,wBACI/L,UAAWC,IAAE0P,cACbvM,QAAS6I,EAFb,4CAOA,wBACIjM,UAAWC,IAAE0P,cACbvM,QAASsJ,EAFb,+CAQPM,GACG,wBACIhN,UACIiN,EAAY,UACHhN,IAAE2P,OADC,YACS3P,IAAE4P,eADX,UAEH5P,IAAE2P,QAEfxM,QAAS,kBACL8J,GAAgB,SAACnD,GAAD,OAAgBA,MAEpC9D,aAAW,iHATf,SAWI,qC,oBC9Wf6J,GAAW,SAAC,GAAkB,IAAhB/P,EAAe,EAAfA,SACvB,OACI,qCACI,cAAC,GAAD,IACA,sBAAMC,UAAWC,KAAEoF,KAAnB,SAA0BtF,QCEhCgQ,GAAaC,gBAAK,kBAAM,gCACxBC,GAAcD,gBAAK,kBAAM,sDAqChB/K,eAAQ,KAAM,CAAEiL,iBHQC,SAAC9Q,GAC7B,8CAAO,WAAOiC,GAAP,eAAA9D,EAAA,+EAE2BF,IAAI8B,aAAaC,GAF5C,OAEO+Q,EAFP,OAGCjE,aAAaS,QAAQ,YAAawD,EAAYC,YAC9C/O,EAAS2K,GAAgBmE,EAAYC,aACrC/O,EAAS+K,GAAW,OALrB,gDAOC9K,MAAM,qDAAD,MAPN,yDAAP,uDGT6C+O,UHoBxB,SAACvE,GACtB,OAAO,SAACzK,GACJA,EAAS2K,GAAgBF,IACzBzK,EAAS+K,GAAW,UGvBbnH,EAnCH,SAAC,GAAqC,IAAnCiL,EAAkC,EAAlCA,iBAAkBG,EAAgB,EAAhBA,UAW7B,OAVApO,qBAAU,WACN,IAAM7C,EAAQ8M,aAAaoE,QAAQ,SAC7BC,EAAUrE,aAAaoE,QAAQ,aAC/BlR,GACF8Q,EAAiB9Q,GACjB8M,aAAaC,WAAW,UACfoE,GACTF,EAAUE,KAEf,CAACF,EAAWH,IAEX,cAAC,GAAD,UACI,cAAC,WAAD,CAAUM,SAAU,cAACnR,EAAA,EAAD,IAApB,SACI,eAAC,IAAD,WACI,cAAC,IAAD,CAAOoR,OAAK,EAACC,KAAK,IAAIC,UAAWC,IACjC,cAAC,IAAD,CACIF,KAAK,8BACLC,UAAWE,IAEf,cAAC,IAAD,CAAOH,KAAK,2BAA2BC,UAAWG,IAClD,cAAC,IAAD,CACIJ,KAAK,uBACLC,UAAWV,KAEf,cAAC,IAAD,CACIS,KAAK,kCACLC,UAAWZ,e,2BChC7BgB,GAAmB5O,OAAO6O,sCAAwCC,KAC3DC,GAAQC,aACjBC,aAAgB,CACZrG,WXkBqB,WAAmC,IAAlCjK,EAAiC,uDAAzBP,EAAcQ,EAAW,uCAC3D,OAAQA,EAAOzC,MACX,KAAKgI,EACD,OAAO,2BACAxF,GADP,IAEI+F,OAAQ9F,EAAO8F,OACfF,kBAAkB,EAClBlG,WAAYM,EAAON,aAE3B,KAAK4F,EACD,OAAO,2BACAvF,GADP,IAEI7C,OAAQ8C,EAAO9C,OACf2I,kBAAkB,IAE1B,KAAKR,EACD,OAAO,2BACAtF,GADP,IAEI6F,kBAAkB,EAClBjF,IAAKX,EAAOtD,OACZkD,YAAaI,EAAOrD,OAG5B,QACI,OAAOoD,IWzCXuQ,YAAavM,KACbwH,aLA2B,WAAmC,IAAlCxL,EAAiC,uDAAzB2K,EAAc1K,EAAW,uCACjE,OAAQA,EAAOzC,MACX,KAAKkN,EACD,OAAO,2BACA1K,GADP,IAEIN,WAAYO,EAAO1C,OAE3B,KAAKgN,EACD,OAAO,2BACAvK,GADP,IAEI4K,eAAgB3K,EAAO8F,SAE/B,KAAKvG,EACD,OAAO,2BACAQ,GADP,IAEI4K,eAAgB,GAChBlL,WAAY,KAEpB,KAAK8K,EACD,OAAO,2BACAxK,GADP,IAEI6K,cAAe7K,EAAM6K,eAG7B,KAAKJ,EACD,OAAO,2BACAzK,GADP,IAEI6K,cAAc,IAGtB,QACI,OAAO7K,IK9BXoE,WAAYrE,IACZ0L,KJNmB,WAAmC,IAAlCzL,EAAiC,uDAAzBP,GAAcQ,EAAW,uCACzD,OAAQA,EAAOzC,MACX,KAAKsN,EACD,OAAO,2BACA9K,GADP,IAEI1B,MAAO2B,EAAO3B,MACd2M,QAAQ,IAGhB,KAAKF,GACD,MAAO,CACHE,QAAQ,GAGhB,QACI,OAAOjL,MIPOiQ,GAAiBO,aAAgBC,QCT3DC,IAASC,OACD,cAAC,IAAD,CAAUP,MAAOA,GAAjB,SACI,cAAC,IAAMQ,WAAP,UACI,cAAC,IAAD,UACI,cAAC,GAAD,UAIhBtE,SAASuE,eAAe,W","file":"static/js/main.1021e8fa.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__3uZM9\",\"header__wrapper\":\"Header_header__wrapper__vQKkf\",\"header__nav\":\"Header_header__nav__3JeZP\",\"header__nav_active\":\"Header_header__nav_active__Hx36i\",\"header__list\":\"Header_header__list__1UdxG\",\"header__link\":\"Header_header__link__2V0oV\",\"header__link_active\":\"Header_header__link_active__3Gl6T\",\"header__login\":\"Header_header__login__YSFML\",\"header__right\":\"Header_header__right__21RYd\",\"header__search\":\"Header_header__search__19NwG\",\"header__search_active\":\"Header_header__search_active__1s0KQ\",\"search__wrap\":\"Header_search__wrap__1xtz9\",\"header__logo\":\"Header_header__logo__37IEL\",\"header__searched_list\":\"Header_header__searched_list__2iVPg\",\"header__searched_list_active\":\"Header_header__searched_list_active__3bcTW\",\"header__searched_item\":\"Header_header__searched_item__2wJOX\",\"header__searched_link\":\"Header_header__searched_link__315xd\",\"header__searched_info\":\"Header_header__searched_info__nTkK-\",\"header__searched_indicator\":\"Header_header__searched_indicator__3upX8\",\"header__search_btn\":\"Header_header__search_btn__hgIjg\",\"search\":\"Header_search__-HKzH\",\"search__active\":\"Header_search__active__1NcwJ\",\"burger\":\"Header_burger__31zbt\",\"burger_active\":\"Header_burger_active__2cHHH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar\":\"Sidebar_sidebar__1E0e4\",\"sidebar_close\":\"Sidebar_sidebar_close__24mwi\",\"sidebar__item\":\"Sidebar_sidebar__item__3ND4e\",\"sidebar__title\":\"Sidebar_sidebar__title__1FSBL\",\"sidebar__subtitle\":\"Sidebar_sidebar__subtitle__1FsE7\",\"sidebar__list\":\"Sidebar_sidebar__list__23mBg\",\"sidebar__list_item\":\"Sidebar_sidebar__list_item__2RZb8\",\"sidebar__link\":\"Sidebar_sidebar__link__2nwyd\",\"sidebar__link_active\":\"Sidebar_sidebar__link_active__2OEmG\"};","const base_uri = \"https://api.themoviedb.org/3\";\r\nconst api_key = \"api_key=5daf90e431960f20b1aca24657c54316\";\r\nconst language = \"&language=ru-RU\";\r\n\r\nexport const api = {\r\n    getMovies: async (format = \"movie\", filter = \"popular\", page = \"1\") => {\r\n        const response = await fetch(\r\n            `${base_uri}/${format}/${filter}?${api_key}${language}&page=${page}`\r\n        );\r\n        const { results, total_pages } = await response.json();\r\n        return [results, total_pages];\r\n    },\r\n    getGenres: async (format = \"movie\") => {\r\n        const response = await fetch(\r\n            `${base_uri}/genre/${format}/list?${api_key}${language}`\r\n        );\r\n        const { genres } = await response.json();\r\n        return genres;\r\n    },\r\n    getMovieWithGenre: async (format = \"movie\", id = 80, page = \"1\") => {\r\n        const response = await fetch(\r\n            `${base_uri}/discover/${format}?${api_key}${language}&sort_by=popularity.desc&page=500&with_genres=${id}&page=${page}`\r\n        );\r\n        const { results, total_pages } = await response.json();\r\n        return [results, total_pages];\r\n    },\r\n    search: async (text, type, page = \"1\") => {\r\n        const response = await fetch(\r\n            `${base_uri}/search/${type}?${api_key}${language}&query=${text}&page=${page}`\r\n        );\r\n        const { results, total_pages, total_results } = await response.json();\r\n        return [results, total_pages, total_results];\r\n    },\r\n    getMovie: async (format = \"movie\", id) => {\r\n        const response = await fetch(\r\n            `${base_uri}/${format}/${id}?${api_key}${language}`\r\n        );\r\n        const result = await response.json();\r\n        return result;\r\n    },\r\n    getCredits: async (format = \"movie\", id) => {\r\n        const response = await fetch(\r\n            `${base_uri}/${format}/${id}/credits?${api_key}${language}`\r\n        );\r\n        const result = await response.json();\r\n        return result;\r\n    },\r\n    getAnotherMovieInfo: async (format = \"movie\", id, query, params = \"\") => {\r\n        const response = await fetch(\r\n            `${base_uri}/${format}/${id}/${query}?${api_key}${params}`\r\n        );\r\n        const { results, keywords } = await response.json();\r\n        if (results !== undefined) {\r\n            return results;\r\n        } else {\r\n            return keywords;\r\n        }\r\n    },\r\n    getMoviesWithKeywords: async (format = \"movie\", keywords, page = 1) => {\r\n        const response = await fetch(\r\n            `${base_uri}/discover/${format}?${api_key}${language}&sort_by=popularity.desc&with_keywords=${keywords}&page=${page}`\r\n        );\r\n        const { results } = await response.json();\r\n        return results;\r\n    },\r\n    getNewToken: async () => {\r\n        const response = await fetch(\r\n            `${base_uri}/authentication/token/new?${api_key}`\r\n        );\r\n        const { request_token } = await response.json();\r\n        return request_token;\r\n    },\r\n    getSessionId: async (token) => {\r\n        const response = await fetch(`${base_uri}/authentication/session/new?request_token=${token}&${api_key}`);\r\n        const results = await response.json();\r\n\r\n        return results;\r\n    }\r\n};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pagination\":\"Pagination_pagination__3YGWL\",\"pagination__list\":\"Pagination_pagination__list__2Xg4E\",\"pagination__item\":\"Pagination_pagination__item__2Igva\",\"pagination__item_active\":\"Pagination_pagination__item_active__1Ickp\",\"pagination__link\":\"Pagination_pagination__link__7q00J\",\"pagination__prev\":\"Pagination_pagination__prev__Jtn-u\",\"pagination__next\":\"Pagination_pagination__next__1B197\",\"pagination__disabled\":\"Pagination_pagination__disabled__2Opl6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cards\":\"Cards_cards__2kQZ2\",\"cards__list\":\"Cards_cards__list__s_z0X\",\"item\":\"Cards_item__mdb5-\",\"item__hovered\":\"Cards_item__hovered__aIuH8\",\"item__image\":\"Cards_item__image__3LmF0\",\"item__rating\":\"Cards_item__rating__26_BX\",\"item__bottom\":\"Cards_item__bottom__3zWlH\",\"item__title\":\"Cards_item__title__a6SSw\",\"item__info\":\"Cards_item__info__1IV03\",\"cards__pagination\":\"Cards_cards__pagination__ksePk\",\"cards__pagination_item\":\"Cards_cards__pagination_item__33Eog\",\"cards__pagination_link\":\"Cards_cards__pagination_link__1Tmft\"};","import React from 'react';\r\nimport { useLoading, Puff } from \"@agney/react-loading\";\r\n\r\nexport const Loader = () => {\r\n    const { containerProps, indicatorEl } = useLoading({\r\n        loading: true,\r\n        indicator: <Puff width=\"80\" />,\r\n    });\r\n    return (\r\n        <section style={{width: \"100%\", textAlign: 'center'}} {...containerProps}>\r\n            {indicatorEl}\r\n        </section>\r\n    );\r\n};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"Main_main__R59FI\",\"main__offer\":\"Main_main__offer__2Vovb\",\"main__search\":\"Main_main__search__1-2wC\",\"main__title\":\"Main_main__title__qCF9I\",\"search__btn\":\"Main_search__btn__34kBV\",\"search__btn_tooltip\":\"Main_search__btn_tooltip__Qfl0w\"};","import React from 'react';\r\nimport s from './Container.module.scss';\r\n\r\nexport const Container = ({children}) => {\r\n    return (\r\n        <div className={s.container}>\r\n            {children}\r\n        </div>\r\n    )\r\n};","import { api } from \"../../api/api\";\r\n\r\nconst GET_SEARCH_RESULTS = \"react-movie/mainSearch/GET_SEARCH_RESULTS\";\r\nconst SET_INITIAL_SETTINGS = \"react-movie/mainSearch/SET_INITIAL_SETTINGS\";\r\nconst UPDATE_SEARCH_TEXT = \"react-movie/mainSearch/UPDATE_SEARCH_TEXT\";\r\nconst ZERO_OUT_SEARCH_RESULTS = \"react-movie/mainSearch/ZERO_OUT_SEARCH_RESULTS\";\r\n\r\nconst initialState = {\r\n    searchText: \"\",\r\n    results: [],\r\n    totalPages: 1,\r\n    totalResults: 0,\r\n    currentPage: 1,\r\n    isFetchingResults: true,\r\n};\r\nexport const mainSearchReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case GET_SEARCH_RESULTS: {\r\n            return {\r\n                ...state,\r\n                results: action.results,\r\n                totalPages: action.totalPages,\r\n                totalResults: action.totalResults,\r\n                isFetchingResults: false,\r\n            };\r\n        }\r\n        case UPDATE_SEARCH_TEXT: {\r\n            return {\r\n                ...state,\r\n                searchText: action.text,\r\n            };\r\n        }\r\n        case SET_INITIAL_SETTINGS: {\r\n            return {\r\n                ...state,\r\n                currentPage: action.page,\r\n                isFetchingResults: true,\r\n            };\r\n        }\r\n        case ZERO_OUT_SEARCH_RESULTS: {\r\n            return {\r\n                ...state,\r\n                results: [],\r\n                totalResults: 0\r\n            }\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n\r\nexport const updateSearchText = (text) => {\r\n    return {\r\n        type: UPDATE_SEARCH_TEXT,\r\n        text,\r\n    };\r\n};\r\nexport const getSearchResults = (results, totalPages, totalResults) => {\r\n    return {\r\n        type: GET_SEARCH_RESULTS,\r\n        results,\r\n        totalPages,\r\n        totalResults,\r\n    };\r\n};\r\nexport const setInitialSettings = (page) => {\r\n    return {\r\n        type: SET_INITIAL_SETTINGS,\r\n        page,\r\n    };\r\n};\r\nexport const zeroOutSearchResults = () => {\r\n    return {\r\n        type: ZERO_OUT_SEARCH_RESULTS,\r\n    };\r\n};\r\n\r\nexport const loadSearchResults = (text, format, page = 1) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            dispatch(setInitialSettings(page));\r\n            const [results, totalPages, totalResults] = await api.search(\r\n                text,\r\n                format,\r\n                page\r\n            );\r\n            dispatch(getSearchResults(results, totalPages, totalResults));\r\n        } catch (e) {\r\n            alert(\"Please refresh the page! Unfortunately, we cannot load the search results!\", e);\r\n        }\r\n    };\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport s from \"./Pagination.module.scss\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport const Pagination = ({totalPages,currentPage, rangeOfItems = 10, genreFormat,url = \"\" }) => {\r\n    const [itemsRange, setItemsRange] = useState(rangeOfItems);\r\n    const rangesCount = Math.ceil(totalPages / itemsRange);\r\n    useEffect(() => {\r\n        const mediaQuery = window.matchMedia(\"(max-width: 768px)\");\r\n        const handleTabletChange = () => {\r\n            if (mediaQuery.matches) {\r\n                setItemsRange(4);\r\n            } else {\r\n                setItemsRange(10);\r\n            }\r\n        };\r\n        mediaQuery.addListener(handleTabletChange);\r\n        handleTabletChange(mediaQuery);\r\n        setRangeIndex(defineRange(rangesCount, itemsRange, currentPage));\r\n        return () => {\r\n            mediaQuery.removeListener(handleTabletChange);\r\n        };\r\n    }, [currentPage, itemsRange, rangesCount]);\r\n\r\n    const pages = [];\r\n    for (let i = 1; i <= totalPages; i++) {\r\n        pages.push(i);\r\n    }\r\n\r\n    const defineRange = (rangesCount, rangeOfItems, currentPage) => {\r\n        for (let i = 1; i <= rangesCount; i++) {\r\n            if ( (i - 1) * rangeOfItems + 1 <= currentPage && currentPage <= i * rangeOfItems) {\r\n                return i;\r\n            }\r\n        }\r\n    };\r\n\r\n    const [rangeIndex, setRangeIndex] = useState(defineRange(rangesCount, itemsRange, currentPage));\r\n    const startRangeIndex = (rangeIndex - 1) * itemsRange + 1;\r\n    const endRangeIndex = rangeIndex * itemsRange;\r\n\r\n    return (\r\n        <div className={s.pagination}>\r\n            <button\r\n                className={\r\n                    rangeIndex > 1\r\n                        ? `${s.pagination__prev}`\r\n                        : `${s.pagination__prev} ${s.pagination__disabled}`\r\n                }\r\n                onClick={() => {\r\n                    setRangeIndex(rangeIndex - 1);\r\n                }}\r\n            ></button>\r\n\r\n            {\r\n                <ul className={s.pagination__list}>\r\n                    {pages\r\n                        .filter(\r\n                            (page) =>\r\n                                page >= startRangeIndex && page <= endRangeIndex\r\n                        )\r\n                        .map((page) => {\r\n                            return (\r\n                                <li\r\n                                    key={page}\r\n                                    className={\r\n                                        +page === +currentPage\r\n                                            ? `${s.pagination__item} ${s.pagination__item_active}`\r\n                                            : `${s.pagination__item}`\r\n                                    }\r\n                                >\r\n                                    <Link\r\n                                        className={s.pagination__link}\r\n                                        to={`/${genreFormat}${\r\n                                            url === \"\" ? \"\" : `/${url}`\r\n                                        }/page/${page}`}\r\n                                    >\r\n                                        {page}\r\n                                    </Link>\r\n                                </li>\r\n                            );\r\n                        })}\r\n                </ul>\r\n            }\r\n            <button\r\n                className={\r\n                    rangesCount > rangeIndex\r\n                        ? `${s.pagination__next}`\r\n                        : `${s.pagination__next} ${s.pagination__disabled}`\r\n                }\r\n                onClick={() => {\r\n                    setRangeIndex(rangeIndex + 1);\r\n                }}\r\n            ></button>\r\n        </div>\r\n    );\r\n};","import { useState, useEffect } from 'react';\n\nexport const useDebounce = (value, delay) => {\n    const [ debouncedValue, setDebouncedValue ] = useState(value);\n    useEffect(() => {\n        const timer = setTimeout(() => {\n            setDebouncedValue(value);\n        }, delay);\n\n        return () => {\n            clearTimeout(timer);\n        };\n    }, [ value, delay ]);\n    return debouncedValue;\n};\n","import { useEffect, useState } from \"react\";\r\n\r\nexport const useMediaQuery = (query, initialValue = true) => {\r\n    const [value, setValue] = useState(initialValue);\r\n    useEffect(() => {\r\n        const mediaQuery = window.matchMedia(query);\r\n        const handleTabletChange = () => {\r\n            if (mediaQuery.matches) {\r\n                setValue(true);\r\n            } else {\r\n                setValue(false);\r\n            }\r\n        };\r\n        mediaQuery.addListener(handleTabletChange);\r\n        handleTabletChange(mediaQuery);\r\n        return () => {\r\n            mediaQuery.removeListener(handleTabletChange);\r\n        };\r\n    }, [query]);\r\n    return value;\r\n};\r\n","import { api } from \"../../api/api\";\r\n\r\nconst GET_MOVIE_INFO = \"react-movie/catalog/GET_MOVIE_INFO\";\r\nconst LOADING_MOVIE = \"react-movie/catalog/LOADING_MOVIE\";\r\n\r\nconst initialState = {\r\n    movie: [],\r\n    credits: [],\r\n    reviews: [],\r\n    keywords: [],\r\n    recommend: [],\r\n    isFetchingMovie: true\r\n};\r\nexport const catalogReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case GET_MOVIE_INFO: {\r\n            return {\r\n                ...state,\r\n                movie: action.movie,\r\n                credits: action.credits,\r\n                reviews: action.reviews,\r\n                keywords: action.keywords,\r\n                recommend: action.recommend,\r\n                isFetchingMovie: false,\r\n            };\r\n        }\r\n        case LOADING_MOVIE: {\r\n            return {\r\n                ...state,\r\n                isFetchingMovie: true,\r\n            };\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const getMovieInfo = (movie, credits, reviews, keywords, recommend) => {\r\n    return {\r\n        type: GET_MOVIE_INFO,\r\n        movie,\r\n        credits,\r\n        reviews,\r\n        keywords,\r\n        recommend,\r\n    };\r\n};\r\nexport const loadingMovieInfo = () => {\r\n    return {\r\n        type: LOADING_MOVIE,\r\n    };\r\n};\r\n\r\nexport const loadMovieInfo = (format, id) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            dispatch(loadingMovieInfo());\r\n            const movie = await api.getMovie(format, id);\r\n            const credits = await api.getCredits(format, id);\r\n            const reviews = await api.getAnotherMovieInfo(format, id, \"reviews\");\r\n            const keywords = await api.getAnotherMovieInfo(format, id, \"keywords\");\r\n            const recommend = await api.getAnotherMovieInfo(\r\n                format,\r\n                id,\r\n                \"recommendations\",\r\n                \"&language=ru-RU\"\r\n            );\r\n            dispatch(getMovieInfo(movie, credits, reviews, keywords, recommend));\r\n        } catch (e) {\r\n            alert(\"Sorry we caannot load info about the movie or tv! Try it later!\", e);\r\n        }\r\n    };\r\n};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__35CeP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main__wrapper\":\"MainTemplate_main__wrapper__3UBYs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"Main_main__1gOzt\"};","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { updateSearchText } from \"../../store/reducers/mainSearchReducer\";\r\nimport { Container } from \"../UI/Container/Container\";\r\nimport s from \"./Main.module.scss\";\r\n\r\nconst Main = ({ searchText, updateSearchText }) => {\r\n    const history = useHistory();\r\n\r\n    return (\r\n        <section className={s.main}>\r\n            <Container>\r\n                <div className={s.main__offer}>\r\n                    <h1 className={s.main__title}>\r\n                        Смотрите любимое кино здесь\r\n                    </h1>\r\n                    <div className={s.main__search}>\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Найти фильм или сериал...\"\r\n                            value={searchText}\r\n                            onChange={(e) => updateSearchText(e.target.value)}\r\n                            onKeyDown={(e) =>\r\n                                (e.key === \"Enter\" && searchText.length > 0) &&\r\n                                history.push(\"/search/movie\")\r\n                            }\r\n                        />\r\n                        <button\r\n                            className={s.search__btn}\r\n                            onClick={() => {\r\n                                history.push(\"/search/movie\");\r\n                            }}\r\n                            aria-label=\"Начать поиск по введённым символам\"\r\n                            disabled={searchText.length !== 0 ? false : true}\r\n                        >\r\n                            Поиск\r\n                            {searchText.length === 0 && (\r\n                                <span className={s.search__btn_tooltip}>\r\n                                    Введите что-то в поиск\r\n                                </span>\r\n                            )}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </Container>\r\n        </section>\r\n    );\r\n};\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        searchText: state.mainSearch.searchText,\r\n    };\r\n};\r\nexport default connect(mapStateToProps, {\r\n    updateSearchText,\r\n})(Main);","import { api } from \"../../api/api\";\r\n\r\nconst SET_PAGE_PARAMS = \"react-movie/movies/SET_PAGE_PARAMS\";\r\nconst GET_GENRES = \"react-movie/movies/GET_GENRES\";\r\nconst GET_MOVIES = \"react-movie/movies/GET_MOVIES\";\r\n\r\nconst initialState = {\r\n    sortedMovies: [\r\n        { name: \"Популярное\", link: \"popular\" },\r\n        { name: \"Сейчас смотрят\", link: \"now_playing\" },\r\n        { name: \"Лучшее\", link: \"top_rated\" },\r\n        { name: \"Скоро\", link: \"upcoming\" },\r\n    ],\r\n    sortedTvs: [\r\n        { name: \"Популярное\", link: \"popular\" },\r\n        { name: \"В эфире\", link: \"airing_today\" },\r\n        { name: \"Лучшее\", link: \"top_rated\" },\r\n        { name: \"По телевиденью\", link: \"on_the_air\" },\r\n    ],\r\n    format: [\"tv\", \"movie\"],\r\n    isFetchingMovies: true,\r\n    isFetchingGenres: true,\r\n    movies: [],\r\n    genres: [],\r\n    currentPage: \"1\",\r\n    totalPages: 1,\r\n    url: \"popular\"\r\n};\r\n\r\nexport const moviesReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case GET_MOVIES:\r\n            return {\r\n                ...state,\r\n                movies: action.movies,\r\n                isFetchingMovies: false,\r\n                totalPages: action.totalPages\r\n            };\r\n        case GET_GENRES:\r\n            return {\r\n                ...state,\r\n                genres: action.genres,\r\n                isFetchingGenres: false,\r\n            };\r\n        case SET_PAGE_PARAMS: {\r\n            return {\r\n                ...state,\r\n                isFetchingMovies: true,\r\n                url: action.filter,\r\n                currentPage: action.page\r\n            };\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const getMovies = (movies, totalPages) => {\r\n    return {\r\n        type: GET_MOVIES,\r\n        movies,\r\n        totalPages,\r\n    };\r\n};\r\nexport const getGenres = (genres) => {\r\n    return {\r\n        type: GET_GENRES,\r\n        genres,\r\n    };\r\n};\r\nexport const setPageParams = (filter, page) => {\r\n    return {\r\n        type: SET_PAGE_PARAMS,\r\n        filter,\r\n        page,\r\n    };\r\n};\r\n\r\nexport const loadMovies = (format, filter = \"popular\", page = \"1\") => {\r\n    return async (dispatch) => {\r\n        try {\r\n            dispatch(setPageParams(filter, page));\r\n            const [list, totalPages] = await api.getMovies(format, filter, page);\r\n            dispatch(getMovies(list, totalPages));\r\n        } catch (e) {\r\n            alert(\"Refresh the page! We cannot load movies!\", e);\r\n        }\r\n    };\r\n};\r\nexport const loadGenres = (format) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const list = await api.getGenres(format);\r\n            dispatch(getGenres(list));\r\n        } catch (e) {\r\n            alert(\"Refresh the page! We cannot load genres!\", e);\r\n        }\r\n    };\r\n};\r\nexport const loadMovieWithGenre = (format, id = 80, page = \"1\") => {\r\n    return async (dispatch) => {\r\n        try {\r\n            dispatch(setPageParams(id, page));\r\n            const [list, totalPages] = await api.getMovieWithGenre(\r\n                format,\r\n                id,\r\n                page\r\n            );\r\n            dispatch(getMovies(list, totalPages));\r\n        } catch (e) {\r\n            alert(\"Refresh the page! We cannot load movies!\", e);\r\n        }\r\n    };\r\n};","import React, { useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Pagination } from \"../Pagination/Pagination\";\r\nimport s from \"./Cards.module.scss\";\r\n\r\nexport const Cards = ({ movies, genres, genreFormat, currentPage, totalPages, url }) => {\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0);\r\n    }, []);\r\n    const getCorrectDate = (date) => {\r\n        if (date !== undefined) {\r\n            return date.split(\"-\").reverse().join(\".\");\r\n        }\r\n    };\r\n    const defineGenres = (movieGenres) => {\r\n        let allGenres = [];\r\n        movieGenres.forEach((movieGenre) => {\r\n            genres.forEach((genre) => {\r\n                if (movieGenre === genre.id) {\r\n                    allGenres.push(genre.name);\r\n                }\r\n            });\r\n        });\r\n        return allGenres.join(\", \");\r\n    };\r\n    return (\r\n        <div className={s.cards}>\r\n            <ul className={s.cards__list}>\r\n                {movies.map((movie) => {\r\n                    return (\r\n                        <li key={movie.id} className={s.item}>\r\n                            <div className={s.item__image}>\r\n                                <Link\r\n                                    to={`/catalog/${genreFormat}/${movie.id}`}\r\n                                    className={s.item__link}\r\n                                >\r\n                                    <img\r\n                                        src={\r\n                                            movie.poster_path !== null\r\n                                                ? `https://image.tmdb.org/t/p/w342${movie.poster_path}`\r\n                                                : \"https://dummyimage.com/275x412/a6a6a6/fff.jpg&text=%D0%9D%D0%B5%D1%82+%D0%BF%D0%BE%D1%81%D1%82%D0%B5%D1%80%D0%B0\"\r\n                                        }\r\n                                        alt={(movie.title || movie.original_title) || (movie.name || movie.original_name)}\r\n                                        title={(movie.title || movie.original_title) || (movie.name || movie.original_name)}\r\n                                        loading=\"lazy\"\r\n                                    />\r\n                                </Link>\r\n                            </div>\r\n                            <div className={s.item__rating}>\r\n                                <span>{movie.vote_average.toFixed(1)}</span>\r\n                            </div>\r\n                            <div className={s.item__bottom}>\r\n                                <div className={s.item__title}>\r\n                                    <Link to={`/catalog/${genreFormat}/${movie.id}`}>\r\n                                        {(movie.title || movie.original_title) || (movie.name || movie.original_name)}\r\n                                    </Link>\r\n                                </div>\r\n                                <div className={s.item__date}>\r\n                                    {getCorrectDate(movie.release_date) || getCorrectDate(movie.first_air_date)}\r\n                                </div>\r\n                            </div>\r\n                            <div className={s.item__hovered}>\r\n                                <Link to={`/catalog/${genreFormat}/${movie.id}`}>\r\n                                    <div className={s.item__info}>\r\n                                        <p>\r\n                                            Название:{\" \"}\r\n                                            <span>\r\n                                                {(movie.title || movie.original_title) || (movie.name || movie.original_name)}\r\n                                            </span>\r\n                                        </p>\r\n                                        <p>\r\n                                            Жанры:{\" \"}\r\n                                            <span>\r\n                                                {defineGenres(movie.genre_ids)}\r\n                                            </span>\r\n                                        </p>\r\n                                        <p>\r\n                                            Дата выхода:{\" \"}\r\n                                            <span>\r\n                                                {getCorrectDate(movie.release_date) ||getCorrectDate(movie.first_air_date)}\r\n                                            </span>\r\n                                        </p>\r\n                                    </div>\r\n                                </Link>\r\n                            </div>\r\n                        </li>\r\n                    );\r\n                })}\r\n            </ul>\r\n            <Pagination\r\n                totalPages={totalPages}\r\n                currentPage={currentPage}\r\n                genreFormat={genreFormat}\r\n                url={url}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { Container } from '../Container/Container';\r\nimport s from './MainTemplate.module.scss';\r\n\r\nexport const MainTemplate = ({children}) => {\r\n    return (\r\n        <section>\r\n            <Container>\r\n                <div className={s.main__wrapper}>{children}</div>\r\n            </Container>\r\n        </section>\r\n    );\r\n};","import React, { useState } from \"react\";\r\nimport s from \"./Sidebar.module.scss\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nexport const Sidebar = ({ genres, sort, genreFormat }) => {\r\n    const [isFilterClosed, setIsFilterClosed] = useState(false);\r\n\r\n    const capitalizeFirstLetter = (name) => {\r\n        return name.charAt(0).toUpperCase() + name.substring(1);\r\n    };\r\n\r\n    return (\r\n        <aside\r\n            className={`${s.sidebar} ${isFilterClosed ? s.sidebar_close : \"\"}`}\r\n        >\r\n            <h2\r\n                className={s.sidebar__title}\r\n                onClick={() => setIsFilterClosed((prevState) => !prevState)}\r\n            >\r\n                Фильтры\r\n            </h2>\r\n            <div className={s.sidebar__item}>\r\n                <div className={s.sidebar__main}>\r\n                    <h3 className={s.sidebar__subtitle}>Жанр</h3>\r\n                    <ul className={s.sidebar__list}>\r\n                        {genres.map((genre) => {\r\n                            return (\r\n                                <li\r\n                                    key={genre.id}\r\n                                    className={s.sidebar__list_item}\r\n                                >\r\n                                    <NavLink\r\n                                        activeClassName={s.sidebar__link_active}\r\n                                        className={s.sidebar__link}\r\n                                        to={`/${genreFormat}/${genre.id}`}\r\n                                    >\r\n                                        {capitalizeFirstLetter(genre.name)}\r\n                                    </NavLink>\r\n                                </li>\r\n                            );\r\n                        })}\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            <div className={s.sidebar__item}>\r\n                <div className={s.sidebar__main}>\r\n                    <h3 className={s.sidebar__subtitle}>Отсортируйте</h3>\r\n                    <ul className={s.sidebar__list}>\r\n                        {sort.map((item, index) => {\r\n                            return (\r\n                                <li\r\n                                    key={index}\r\n                                    className={s.sidebar__list_item}\r\n                                >\r\n                                    <NavLink\r\n                                        activeClassName={s.sidebar__link_active}\r\n                                        className={s.sidebar__link}\r\n                                        to={`/${genreFormat}/${item.link}`}\r\n                                    >\r\n                                        {item.name}\r\n                                    </NavLink>\r\n                                </li>\r\n                            );\r\n                        })}\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </aside>\r\n    );\r\n};\r\nexport const MemoizedSidebar = React.memo(Sidebar);\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n    loadGenres,\r\n    loadMovies,\r\n    loadMovieWithGenre,\r\n} from \"../../store/reducers/moviesReducer\";\r\nimport { Cards } from \"../UI/Cards/Cards\";\r\nimport { Loader } from \"../UI/Loader/Loader\";\r\nimport { MainTemplate } from \"../UI/MainTemplate/MainTemplate\";\r\nimport { MemoizedSidebar } from \"../UI/Sidebar/Sidebar\";\r\n\r\nconst Movie = ({\r\n    movies,\r\n    isFetchingGenres,\r\n    isFetchingMovies,\r\n    sorted,\r\n    genres,\r\n    format,\r\n    currentPage,\r\n    totalPages,\r\n    url,\r\n    loadGenres,\r\n    loadMovies,\r\n    loadMovieWithGenre,\r\n    match: {\r\n        params: { id, pageId },\r\n    },\r\n}) => {\r\n    useEffect(() => {\r\n        if (genres.length === 16 || genres.length === 0) {\r\n            loadGenres(format);\r\n        } else if (id === undefined) {\r\n            loadMovies(format);\r\n        } else if (isNaN(parseInt(id))) {\r\n            loadMovies(format, id, pageId);\r\n        } else if (isNaN(parseInt(id)) === false) {\r\n            loadMovieWithGenre(format, id, pageId);\r\n        } else {\r\n            loadMovies(format, id, pageId);\r\n        }\r\n    }, [format, genres.length, id, loadGenres, loadMovieWithGenre, loadMovies, pageId]);\r\n\r\n    return (\r\n        <MainTemplate>\r\n            {isFetchingGenres === false ? (\r\n                <MemoizedSidebar\r\n                    genres={genres}\r\n                    sort={sorted}\r\n                    genreFormat={format}\r\n                />\r\n            ) : (\r\n                <Loader />\r\n            )}\r\n            {isFetchingMovies === false ? (\r\n                <Cards\r\n                    genreFormat={format}\r\n                    movies={movies}\r\n                    genres={genres}\r\n                    currentPage={currentPage}\r\n                    totalPages={totalPages}\r\n                    url={url}\r\n                />\r\n            ) : (\r\n                <Loader />\r\n            )}\r\n        </MainTemplate>\r\n    );\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        movies: state.moviesPage.movies,\r\n        isFetchingGenres: state.moviesPage.isFetchingGenres,\r\n        isFetchingMovies: state.moviesPage.isFetchingMovies,\r\n        sorted: state.moviesPage.sortedMovies,\r\n        genres: state.moviesPage.genres,\r\n        format: state.moviesPage.format[1],\r\n        currentPage: state.moviesPage.currentPage,\r\n        totalPages: state.moviesPage.totalPages,\r\n        url: state.moviesPage.url,\r\n    };\r\n}\r\nexport default connect(mapStateToProps, {\r\n    loadGenres,\r\n    loadMovies,\r\n    loadMovieWithGenre,\r\n})(Movie);\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n    loadGenres,\r\n    loadMovies,\r\n    loadMovieWithGenre,\r\n} from \"../../store/reducers/moviesReducer\";\r\nimport { Cards } from \"../UI/Cards/Cards\";\r\nimport { Loader } from \"../UI/Loader/Loader\";\r\nimport { MainTemplate } from \"../UI/MainTemplate/MainTemplate\";\r\nimport { MemoizedSidebar } from \"../UI/Sidebar/Sidebar\";\r\n\r\nconst Tv = ({\r\n    movies,\r\n    isFetchingGenres,\r\n    isFetchingMovies,\r\n    sorted,\r\n    genres,\r\n    format,\r\n    currentPage,\r\n    totalPages,\r\n    url,\r\n    loadGenres,\r\n    loadMovies,\r\n    loadMovieWithGenre,\r\n    match: {\r\n        params: { id, pageId },\r\n    },\r\n}) => {\r\n    useEffect(() => {\r\n        if (genres.length === 19 || genres.length === 0) {\r\n            loadGenres(format);\r\n        } else if (id === undefined) {\r\n            loadMovies(format);\r\n        } else if (isNaN(parseInt(id))) {\r\n            loadMovies(format, id, pageId);\r\n        } else if (isNaN(parseInt(id)) === false) {\r\n            loadMovieWithGenre(format, id, pageId);\r\n        } else {\r\n            loadMovies(format, id, pageId);\r\n        }\r\n    }, [format, genres.length, id, loadGenres, loadMovieWithGenre, loadMovies, pageId]);\r\n\r\n    return (\r\n        <MainTemplate>\r\n            {isFetchingGenres === false ? (\r\n                <MemoizedSidebar\r\n                    genres={genres}\r\n                    sort={sorted}\r\n                    genreFormat={format}\r\n                />\r\n            ) : (\r\n                <Loader />\r\n            )}\r\n            {isFetchingMovies === false ? (\r\n                <Cards\r\n                    genreFormat={format}\r\n                    movies={movies}\r\n                    genres={genres}\r\n                    currentPage={currentPage}\r\n                    totalPages={totalPages}\r\n                    url={url}\r\n                />\r\n            ) : (\r\n                <Loader />\r\n            )}\r\n        </MainTemplate>\r\n    );\r\n};\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        movies: state.moviesPage.movies,\r\n        isFetchingGenres: state.moviesPage.isFetchingGenres,\r\n        isFetchingMovies: state.moviesPage.isFetchingMovies,\r\n        sorted: state.moviesPage.sortedTvs,\r\n        genres: state.moviesPage.genres,\r\n        format: state.moviesPage.format[0],\r\n        currentPage: state.moviesPage.currentPage,\r\n        totalPages: state.moviesPage.totalPages,\r\n        url: state.moviesPage.url,\r\n    };\r\n}\r\nexport default connect(mapStateToProps, {\r\n    loadGenres,\r\n    loadMovies,\r\n    loadMovieWithGenre,\r\n})(Tv);\r\n","import { api } from \"../../api/api\";\r\n\r\nconst GET_SEARCHED_MOVIES = \"react-movie/header/GET_SEARCHED_MOVIES\";\r\nconst SET_IS_SEARCH_OPEN = \"react-movie/header/SET_IS_SEARCH_OPEN\";\r\nconst SET_IS_SEARCH_CLOSE = \"react-movie/header/SET_IS_SEARCH_CLOSE\";\r\nconst UPDATE_TEXT = \"react-movie/header/UPDATE_TEXT\";\r\nconst ZERO_OUT_SEARCH_RESULTS = \"react-movie/header/ZERO_OUT_SEARCH_RESULTS\";\r\n\r\nconst initialStata = {\r\n    searchedMovies: [],\r\n    searchText: \"\",\r\n    isSearchOpen: false\r\n};\r\nexport const headerSearchReducer = (state = initialStata, action) => {\r\n    switch (action.type) {\r\n        case UPDATE_TEXT:\r\n            return {\r\n                ...state,\r\n                searchText: action.text,\r\n            };\r\n        case GET_SEARCHED_MOVIES:\r\n            return {\r\n                ...state,\r\n                searchedMovies: action.movies,\r\n            };\r\n        case ZERO_OUT_SEARCH_RESULTS:\r\n            return {\r\n                ...state,\r\n                searchedMovies: [],\r\n                searchText: \"\"\r\n            };\r\n        case SET_IS_SEARCH_OPEN: {\r\n            return {\r\n                ...state,\r\n                isSearchOpen: !state.isSearchOpen,\r\n            };\r\n        }\r\n        case SET_IS_SEARCH_CLOSE: {\r\n            return {\r\n                ...state,\r\n                isSearchOpen: false\r\n            }\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n\r\nexport const updateText = (text) => {\r\n    return {\r\n        type: UPDATE_TEXT,\r\n        text,\r\n    };\r\n};\r\nexport const getSearchedMovies = (movies) => {\r\n    return {\r\n        type: GET_SEARCHED_MOVIES,\r\n        movies,\r\n    };\r\n};\r\nexport const zeroOutSearchResults = () => {\r\n    return {\r\n        type: ZERO_OUT_SEARCH_RESULTS,\r\n    };\r\n};\r\nexport const setIsSearchOpen = () => {\r\n    return {\r\n        type: SET_IS_SEARCH_OPEN,\r\n    };\r\n};\r\nexport const setIsSearchClose = () => {\r\n    return {\r\n        type: SET_IS_SEARCH_CLOSE,\r\n    };\r\n};\r\n\r\nexport const getSearchResults = (text, type) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const [results] = await api.search(text, type);\r\n            dispatch(getSearchedMovies(results));\r\n        } catch (e) {\r\n            alert(\"Please, refresh the page, search is not working\", e);\r\n        }\r\n    };\r\n};","import { api } from \"../../api/api\";\r\n\r\nconst SET_NEW_SESSION = \"react-movie/auth/SET_NEW_SESSION\";\r\nconst LOGOUT = \"react-movie/auth/LOGOUT\";\r\n\r\nconst initialState = {\r\n    sessionId: null,\r\n    isAuth: false,\r\n};\r\nexport const authReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_NEW_SESSION: {\r\n            return {\r\n                ...state,\r\n                token: action.token,\r\n                isAuth: true\r\n            };\r\n        }\r\n        case LOGOUT: {\r\n            return {\r\n                isAuth: false\r\n            }\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n}\r\n\r\nexport const setNewSessionId = (sessionId) => {\r\n    return {\r\n        type: SET_NEW_SESSION,\r\n        sessionId,\r\n    };\r\n};\r\nexport const logout = () => {\r\n    localStorage.removeItem(\"sessionId\");\r\n    return {\r\n        type: LOGOUT,\r\n    };\r\n};\r\n\r\nexport const requestNewToken = () => {\r\n    return async (dispatch) => {\r\n        try {\r\n            dispatch(logout());\r\n            const token = await api.getNewToken();\r\n            localStorage.setItem(\"token\", token);\r\n            window.location.replace(\r\n                `https://www.themoviedb.org/authenticate/${token}?redirect_to=${window.location.href}`\r\n            );\r\n        } catch (e) {\r\n            alert(\"Sorry we cannot get token in order to register you! Try later, please!\", e);\r\n        }\r\n    };\r\n};\r\nexport const requestSessionId = (token) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const sessionInfo = await api.getSessionId(token);\r\n            localStorage.setItem(\"sessionId\", sessionInfo.session_id);\r\n            dispatch(setNewSessionId(sessionInfo.session_id));\r\n            dispatch(autoLogout(60 * 60 * 1000));\r\n        } catch (e) {\r\n            alert(\"Sorry we cannot create session! Try later, please!\", e);\r\n        }\r\n    };\r\n};\r\nexport const autoLogin = (sessionId) => {\r\n    return (dispatch) => {\r\n        dispatch(setNewSessionId(sessionId));\r\n        dispatch(autoLogout(60 * 60 * 1000));\r\n    };\r\n};\r\nexport const autoLogout = (time) => {\r\n    return (dispatch) => {\r\n        setTimeout(() => {\r\n            dispatch(logout());\r\n        }, time);\r\n    };\r\n};","import React, { useEffect, useState } from \"react\";\r\nimport s from \"./Header.module.scss\";\r\nimport { NavLink, Link } from \"react-router-dom\";\r\nimport { Container } from \"../Container/Container\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n    updateText,\r\n    getSearchResults,\r\n    zeroOutSearchResults,\r\n    setIsSearchOpen,\r\n    setIsSearchClose,\r\n} from \"../../../store/reducers/headerSearchReducer\";\r\nimport { logout, requestNewToken } from \"../../../store/reducers/authReducer\";\r\nimport { useDebounce } from \"../../../api/useDebounce\";\r\nimport { useMediaQuery } from \"../../../api/useMediaQuery\";\r\n\r\nconst Header = ({\r\n    updateText,\r\n    searchText,\r\n    getSearchResults,\r\n    movies,\r\n    zeroOutSearchResults,\r\n    isSearchOpen,\r\n    setIsSearchOpen,\r\n    setIsSearchClose,\r\n    requestNewToken,\r\n    isAuth,\r\n    logout,\r\n}) => {\r\n    const isBurgerShown = useMediaQuery(\"(max-width: 568px)\", true);\r\n    const [isBurgerOpen, setIsBurgerOpen] = useState(false);\r\n    const debouncedText = useDebounce(searchText, 400);\r\n\r\n    useEffect(() => {\r\n        if (isBurgerOpen) {\r\n            document.body.style.overflow = \"hidden\";\r\n        } else {\r\n            document.body.style.overflow = \"\";\r\n        }\r\n    }, [isBurgerOpen]);\r\n\r\n    useEffect(() => {\r\n        if (debouncedText.length > 0) {\r\n            getSearchResults(debouncedText, \"multi\");\r\n        } else {\r\n            zeroOutSearchResults();\r\n        }\r\n    }, [debouncedText, getSearchResults, zeroOutSearchResults]);\r\n    const getRelevantSearchAnswer = () => {\r\n        if (movies.length === 0 && searchText.length > 0) {\r\n            return (\r\n                <li className={s.header__searched_info}>\r\n                    К сожаления, по Вашему запросу ничего не найдено &#128532;\r\n                </li>\r\n            );\r\n        } else if (movies.length === 0 && searchText.length === 0) {\r\n            return (\r\n                <li className={s.header__searched_info}>\r\n                    Введите что-нибудь для поиска\r\n                </li>\r\n            );\r\n        } else {\r\n            const regexp = new RegExp(searchText, \"g\");\r\n            return movies\r\n                .filter((movie) => movie.media_type !== \"person\")\r\n                .map((movie) => {\r\n                    const name = (\r\n                        movie.title ||\r\n                        movie.original_title ||\r\n                        movie.name ||\r\n                        movie.original_name\r\n                    ).replace(\r\n                        regexp,\r\n                        `<span style=\"background-color: var(--color-highlight)\" class=\"s.header__search_highlited\">${searchText}</span>`\r\n                    );\r\n                    return (\r\n                        <li\r\n                            key={movie.id}\r\n                            className={s.header__searched_item}\r\n                            onClick={() => {\r\n                                setIsSearchOpen();\r\n                                zeroOutSearchResults();\r\n                            }}\r\n                        >\r\n                            <Link\r\n                                to={`/catalog/${movie.media_type}/${movie.id}`}\r\n                                className={s.header__searched_link}\r\n                            >\r\n                                {movie.media_type === \"movie\" ? (\r\n                                    <svg\r\n                                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                                        viewBox=\"0 0 512 512\"\r\n                                    >\r\n                                        <circle\r\n                                            cx=\"256\"\r\n                                            cy=\"256\"\r\n                                            r=\"256\"\r\n                                            fill=\"#ff0037\"\r\n                                        />\r\n                                        <path\r\n                                            d=\"M512 256a257.75 257.75 0 00-3.485-42.218l-118.15-118.15-289.608 124.09v192.24l92.208 92.208C213.131 509.277 234.247 512 256 512c141.385 0 256-114.615 256-256z\"\r\n                                            fill=\"#d30f0f\"\r\n                                        />\r\n                                        <path\r\n                                            fill=\"#414952\"\r\n                                            d=\"M100.76 219.72h310.48v192.24H100.76z\"\r\n                                        />\r\n                                        <path\r\n                                            fill=\"#23272b\"\r\n                                            d=\"M255.76 219.72h155.48v192.24H255.76z\"\r\n                                        />\r\n                                        <path\r\n                                            fill=\"#fff\"\r\n                                            d=\"M100.76 219.72h310.48v53.57H100.76z\"\r\n                                        />\r\n                                        <path\r\n                                            fill=\"#f7f7f7\"\r\n                                            d=\"M255.76 219.72h155.48v53.57H255.76z\"\r\n                                        />\r\n                                        <path\r\n                                            fill=\"#707789\"\r\n                                            d=\"M259 273.295h-28.667L253 219.722h28.667z\"\r\n                                        />\r\n                                        <path\r\n                                            fill=\"#636978\"\r\n                                            d=\"M281.667 219.722h-25.905v53.573H259z\"\r\n                                        />\r\n                                        <g fill=\"#707789\">\r\n                                            <path d=\"M194.212 273.295h-28.666l22.666-53.573h28.667zM129.424 273.295h-28.666l22.666-53.573h28.667z\" />\r\n                                        </g>\r\n                                        <g fill=\"#636978\">\r\n                                            <path d=\"M323.788 273.295h-28.667l22.667-53.573h28.666zM388.576 273.295h-28.667l22.667-53.573h28.666z\" />\r\n                                        </g>\r\n                                        <path\r\n                                            fill=\"#fff\"\r\n                                            d=\"M88.344 167.617L390.39 95.645l12.418 52.115-302.046 71.972z\"\r\n                                        />\r\n                                        <path\r\n                                            fill=\"#f7f7f7\"\r\n                                            d=\"M390.365 95.632L255.762 127.71v55.072l147.022-35.037z\"\r\n                                        />\r\n                                        <path\r\n                                            fill=\"#707789\"\r\n                                            d=\"M254.689 183.037l-27.885 6.646 9.63-57.367 27.886-6.646z\"\r\n                                        />\r\n                                        <path\r\n                                            fill=\"#636978\"\r\n                                            d=\"M255.762 127.71v48.938l8.558-50.978z\"\r\n                                        />\r\n                                        <g fill=\"#707789\">\r\n                                            <path d=\"M191.667 198.056l-27.886 6.646 9.63-57.367 27.886-6.646zM128.644 213.076l-27.886 6.645 9.631-57.367 27.885-6.646z\" />\r\n                                        </g>\r\n                                        <g fill=\"#636978\">\r\n                                            <path d=\"M317.712 168.018l-27.886 6.646 9.631-57.367 27.886-6.646zM380.735 152.999l-27.886 6.646 9.631-57.367 27.885-6.646z\" />\r\n                                        </g>\r\n                                    </svg>\r\n                                ) : (\r\n                                    <svg\r\n                                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                                        viewBox=\"0 0 512 512\"\r\n                                    >\r\n                                        <path d=\"M0 61h512v300H0zM341 421v-30H171v30h-50v30h270v-30z\" />\r\n                                    </svg>\r\n                                )}\r\n                                <span\r\n                                    dangerouslySetInnerHTML={{\r\n                                        __html: `${name}`,\r\n                                    }}\r\n                                ></span>\r\n                                <span className={s.header__searched_indicator}>\r\n                                    {movie.media_type === \"movie\"\r\n                                        ? \"Фильм\"\r\n                                        : \"Сериал\"}\r\n                                </span>\r\n                            </Link>\r\n                        </li>\r\n                    );\r\n                });\r\n        }\r\n    };\r\n    return (\r\n        <header className={s.header}>\r\n            <Container>\r\n                <div className={s.header__wrapper}>\r\n                    <div className={s.header__logo} onClick={setIsSearchClose}>\r\n                        <Link to=\"/\">\r\n                            <svg\r\n                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                viewBox=\"0 0 512 512\"\r\n                            >\r\n                                <circle\r\n                                    cx=\"256\"\r\n                                    cy=\"256\"\r\n                                    r=\"256\"\r\n                                    fill=\"#ff0037\"\r\n                                />\r\n                                <path\r\n                                    d=\"M512 256a257.75 257.75 0 00-3.485-42.218l-118.15-118.15-289.608 124.09v192.24l92.208 92.208C213.131 509.277 234.247 512 256 512c141.385 0 256-114.615 256-256z\"\r\n                                    fill=\"#d30f0f\"\r\n                                />\r\n                                <path\r\n                                    fill=\"#414952\"\r\n                                    d=\"M100.76 219.72h310.48v192.24H100.76z\"\r\n                                />\r\n                                <path\r\n                                    fill=\"#23272b\"\r\n                                    d=\"M255.76 219.72h155.48v192.24H255.76z\"\r\n                                />\r\n                                <path\r\n                                    fill=\"#fff\"\r\n                                    d=\"M100.76 219.72h310.48v53.57H100.76z\"\r\n                                />\r\n                                <path\r\n                                    fill=\"#f7f7f7\"\r\n                                    d=\"M255.76 219.72h155.48v53.57H255.76z\"\r\n                                />\r\n                                <path\r\n                                    fill=\"#707789\"\r\n                                    d=\"M259 273.295h-28.667L253 219.722h28.667z\"\r\n                                />\r\n                                <path\r\n                                    fill=\"#636978\"\r\n                                    d=\"M281.667 219.722h-25.905v53.573H259z\"\r\n                                />\r\n                                <g fill=\"#707789\">\r\n                                    <path d=\"M194.212 273.295h-28.666l22.666-53.573h28.667zM129.424 273.295h-28.666l22.666-53.573h28.667z\" />\r\n                                </g>\r\n                                <g fill=\"#636978\">\r\n                                    <path d=\"M323.788 273.295h-28.667l22.667-53.573h28.666zM388.576 273.295h-28.667l22.667-53.573h28.666z\" />\r\n                                </g>\r\n                                <path\r\n                                    fill=\"#fff\"\r\n                                    d=\"M88.344 167.617L390.39 95.645l12.418 52.115-302.046 71.972z\"\r\n                                />\r\n                                <path\r\n                                    fill=\"#f7f7f7\"\r\n                                    d=\"M390.365 95.632L255.762 127.71v55.072l147.022-35.037z\"\r\n                                />\r\n                                <path\r\n                                    fill=\"#707789\"\r\n                                    d=\"M254.689 183.037l-27.885 6.646 9.63-57.367 27.886-6.646z\"\r\n                                />\r\n                                <path\r\n                                    fill=\"#636978\"\r\n                                    d=\"M255.762 127.71v48.938l8.558-50.978z\"\r\n                                />\r\n                                <g fill=\"#707789\">\r\n                                    <path d=\"M191.667 198.056l-27.886 6.646 9.63-57.367 27.886-6.646zM128.644 213.076l-27.886 6.645 9.631-57.367 27.885-6.646z\" />\r\n                                </g>\r\n                                <g fill=\"#636978\">\r\n                                    <path d=\"M317.712 168.018l-27.886 6.646 9.631-57.367 27.886-6.646zM380.735 152.999l-27.886 6.646 9.631-57.367 27.885-6.646z\" />\r\n                                </g>\r\n                            </svg>\r\n                        </Link>\r\n                    </div>\r\n                    <nav\r\n                        className={\r\n                            isBurgerOpen\r\n                                ? `${s.header__nav} ${s.header__nav_active}`\r\n                                : `${s.header__nav}`\r\n                        }\r\n                    >\r\n                        <ul className={s.header__list}>\r\n                            <li className={s.header__item}>\r\n                                <NavLink\r\n                                    activeClassName={s.header__link_active}\r\n                                    className={s.header__link}\r\n                                    to=\"/movie\"\r\n                                    onClick={() => {\r\n                                        setIsSearchClose();\r\n                                        setIsBurgerOpen(false);\r\n                                    }}\r\n                                >\r\n                                    Фильмы\r\n                                </NavLink>\r\n                            </li>\r\n                            <li className={s.header__item}>\r\n                                <NavLink\r\n                                    activeClassName={s.header__link_active}\r\n                                    className={s.header__link}\r\n                                    to=\"/tv\"\r\n                                    onClick={() => {\r\n                                        setIsSearchClose();\r\n                                        setIsBurgerOpen(false);\r\n                                    }}\r\n                                >\r\n                                    Сериалы\r\n                                </NavLink>\r\n                            </li>\r\n                        </ul>\r\n                    </nav>\r\n                    <div className={s.header__right}>\r\n                        <button\r\n                            className={s.header__search_btn}\r\n                            onClick={() => setIsSearchOpen()}\r\n                        >\r\n                            <svg\r\n                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                                width=\"512\"\r\n                                height=\"512\"\r\n                                viewBox=\"0 0 512.005 512.005\"\r\n                            >\r\n                                <path\r\n                                    d=\"M505.749 475.587l-145.6-145.6c28.203-34.837 45.184-79.104 45.184-127.317C405.333 90.926 314.41.003 202.666.003S0 90.925 0 202.669s90.923 202.667 202.667 202.667c48.213 0 92.48-16.981 127.317-45.184l145.6 145.6c4.16 4.16 9.621 6.251 15.083 6.251s10.923-2.091 15.083-6.251c8.341-8.341 8.341-21.824-.001-30.165zM202.667 362.669c-88.235 0-160-71.765-160-160s71.765-160 160-160 160 71.765 160 160-71.766 160-160 160z\"\r\n                                    fill=\"#fff\"\r\n                                    data-original=\"#000000\"\r\n                                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                                />\r\n                            </svg>\r\n                        </button>\r\n                        <div\r\n                            className={\r\n                                isSearchOpen === true\r\n                                    ? `${s.header__search} ${s.header__search_active}`\r\n                                    : `${s.header__search}`\r\n                            }\r\n                        >\r\n                            <div className={s.search__wrap}>\r\n                                <input\r\n                                    className={\r\n                                        isSearchOpen === true\r\n                                            ? `${s.search} ${s.search__active}`\r\n                                            : `${s.search}`\r\n                                    }\r\n                                    placeholder=\"Ищите кино прямо здесь...\"\r\n                                    type=\"text\"\r\n                                    value={searchText}\r\n                                    onChange={(e) => {\r\n                                        updateText(e.target.value);\r\n                                    }}\r\n                                />\r\n                            </div>\r\n                            <ul\r\n                                className={\r\n                                    isSearchOpen === true\r\n                                        ? `${s.header__searched_list} ${s.header__searched_list_active}`\r\n                                        : `${s.header__searched_list}`\r\n                                }\r\n                            >\r\n                                {getRelevantSearchAnswer()}\r\n                            </ul>\r\n                        </div>\r\n                        {isAuth ? (\r\n                            <button\r\n                                className={s.header__login}\r\n                                onClick={logout}\r\n                            >\r\n                                Выйти\r\n                            </button>\r\n                        ) : (\r\n                            <button\r\n                                className={s.header__login}\r\n                                onClick={requestNewToken}\r\n                            >\r\n                                Войти\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                    {isBurgerShown && (\r\n                        <button\r\n                            className={\r\n                                isBurgerOpen\r\n                                    ? `${s.burger} ${s.burger_active}`\r\n                                    : `${s.burger}`\r\n                            }\r\n                            onClick={() =>\r\n                                setIsBurgerOpen((prevState) => !prevState)\r\n                            }\r\n                            aria-label=\"Открыть/закрыть меню\"\r\n                        >\r\n                            <span></span>\r\n                        </button>\r\n                    )}\r\n                </div>\r\n            </Container>\r\n        </header>\r\n    );\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        searchText: state.headerSearch.searchText,\r\n        movies: state.headerSearch.searchedMovies,\r\n        isSearchOpen: state.headerSearch.isSearchOpen,\r\n        isAuth: state.auth.isAuth\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, {\r\n    updateText,\r\n    getSearchResults,\r\n    zeroOutSearchResults,\r\n    setIsSearchOpen,\r\n    requestNewToken,\r\n    logout,\r\n    setIsSearchClose,\r\n})(Header);\r\n","import React from \"react\";\r\nimport Header from \"../Header/Header\";\r\nimport s from \"./Main.module.scss\";\r\n\r\nexport const MainWrap = ({ children }) => {\r\n    return (\r\n        <>\r\n            <Header />\r\n            <main className={s.main}>{children}</main>\r\n        </>\r\n    );\r\n};\r\n","import React, { lazy, Suspense, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Route, Switch } from \"react-router-dom\";\nimport Main from \"./components/MainPage/Main\";\nimport Movie from \"./components/MoviePage/Movie\";\nimport Tv from \"./components/TvPage/Tv\";\nimport { Loader } from \"./components/UI/Loader/Loader\";\nimport { MainWrap } from \"./components/UI/Main/Main\";\nimport { autoLogin, requestSessionId } from \"./store/reducers/authReducer\";\n\nconst SearchPage = lazy(() => import(\"./components/SearchPage/SearchPage\"));\nconst CatalogPage = lazy(() => import(\"./components/CatalogPage/CatalogPage\"));\n\nconst App = ({ requestSessionId, autoLogin }) => {\n    useEffect(() => {\n        const token = localStorage.getItem(\"token\");\n        const session = localStorage.getItem(\"sessionId\");\n        if (!!token) {\n            requestSessionId(token);\n            localStorage.removeItem(\"token\");\n        } else if (!!session) {\n            autoLogin(session);\n        }\n    }, [autoLogin, requestSessionId]);\n    return (\n        <MainWrap>\n            <Suspense fallback={<Loader />}>\n                <Switch>\n                    <Route exact path=\"/\" component={Main} />\n                    <Route\n                        path=\"/movie/:id?/:page?/:pageId?\"\n                        component={Movie}\n                    />\n                    <Route path=\"/tv/:id?/:page?/:pageId?\" component={Tv} />\n                    <Route\n                        path=\"/catalog/:format/:id\"\n                        component={CatalogPage}\n                    />\n                    <Route\n                        path=\"/search/:format/:page?/:pageId?\"\n                        component={SearchPage}\n                    />\n                </Switch>\n            </Suspense>\n        </MainWrap>\n    );\n};\n\nexport default connect(null, { requestSessionId, autoLogin })(App);\n","import { applyMiddleware, combineReducers, compose, createStore } from \"redux\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport { catalogReducer } from \"./reducers/catalogReducer\";\r\nimport { headerSearchReducer } from \"./reducers/headerSearchReducer\";\r\nimport { mainSearchReducer } from \"./reducers/mainSearchReducer\";\r\nimport { moviesReducer } from \"./reducers/moviesReducer\";\r\nimport { authReducer } from \"./reducers/authReducer\";\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nexport const store = createStore(\r\n    combineReducers({\r\n        moviesPage: moviesReducer,\r\n        catalogPage: catalogReducer,\r\n        headerSearch: headerSearchReducer,\r\n        mainSearch: mainSearchReducer,\r\n        auth: authReducer,\r\n    }),\r\n    /* preloadedState, */ composeEnhancers(applyMiddleware(thunkMiddleware))\r\n);\r\n\r\n// export const store = createStore(\r\n//     combineReducers({\r\n//         moviesPage: moviesReducer,\r\n//         catalogPage: catalogReducer,\r\n//         headerSearch: headerSearchReducer,\r\n//         mainSearch: mainSearchReducer,\r\n//         auth: authReducer,\r\n//     }),\r\n//     applyMiddleware(thunkMiddleware)\r\n// );\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport './index.scss';\nimport App from './App';\nimport { store } from './store/store';\n\nReactDOM.render(\n        <Provider store={store}>\n            <React.StrictMode>\n                <Router>\n                    <App/>\n                </Router>\n            </React.StrictMode>\n        </Provider>,\n    document.getElementById('root')\n);"],"sourceRoot":""}